/*! numjs#0.11.4 */
!function(r){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.nj=r()}}(function(){return function r(i,n,t){function a(u,c){if(!n[u]){if(!i[u]){var e="function"==typeof require&&require;if(!c&&e)return e(u,!0);if(s)return s(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var g=n[u]={exports:{}};i[u][0].call(g.exports,function(r){var n=i[u][1][r];return a(n?n:r)},g,g.exports,r,i,n,t)}return n[u].exports}for(var s="function"==typeof require&&require,u=0;u<t.length;u++)a(t[u]);return a}({1:[function(r,i,n){"use strict";function t(){for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,n=r.length;i<n;++i)e[i]=r[i],f[r.charCodeAt(i)]=i;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63}function a(r){var i,n,t,a,s,u,c=r.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s="="===r[c-2]?2:"="===r[c-1]?1:0,u=new g(3*c/4-s),t=s>0?c-4:c;var e=0;for(i=0,n=0;i<t;i+=4,n+=3)a=f[r.charCodeAt(i)]<<18|f[r.charCodeAt(i+1)]<<12|f[r.charCodeAt(i+2)]<<6|f[r.charCodeAt(i+3)],u[e++]=a>>16&255,u[e++]=a>>8&255,u[e++]=255&a;return 2===s?(a=f[r.charCodeAt(i)]<<2|f[r.charCodeAt(i+1)]>>4,u[e++]=255&a):1===s&&(a=f[r.charCodeAt(i)]<<10|f[r.charCodeAt(i+1)]<<4|f[r.charCodeAt(i+2)]>>2,u[e++]=a>>8&255,u[e++]=255&a),u}function s(r){return e[r>>18&63]+e[r>>12&63]+e[r>>6&63]+e[63&r]}function u(r,i,n){for(var t,a=[],u=i;u<n;u+=3)t=(r[u]<<16)+(r[u+1]<<8)+r[u+2],a.push(s(t));return a.join("")}function c(r){for(var i,n=r.length,t=n%3,a="",s=[],c=16383,f=0,g=n-t;f<g;f+=c)s.push(u(r,f,f+c>g?g:f+c));return 1===t?(i=r[n-1],a+=e[i>>2],a+=e[i<<4&63],a+="=="):2===t&&(i=(r[n-2]<<8)+r[n-1],a+=e[i>>10],a+=e[i>>4&63],a+=e[i<<2&63],a+="="),s.push(a),s.join("")}n.toByteArray=a,n.fromByteArray=c;var e=[],f=[],g="undefined"!=typeof Uint8Array?Uint8Array:Array;t()},{}],2:[function(r,i,n){"use strict";"use restrict";function t(r){var i=32;return r&=-r,r&&i--,65535&r&&(i-=16),16711935&r&&(i-=8),252645135&r&&(i-=4),858993459&r&&(i-=2),1431655765&r&&(i-=1),i}var a=32;n.INT_BITS=a,n.INT_MAX=2147483647,n.INT_MIN=-1<<a-1,n.sign=function(r){return(r>0)-(r<0)},n.abs=function(r){var i=r>>a-1;return(r^i)-i},n.min=function(r,i){return i^(r^i)&-(r<i)},n.max=function(r,i){return r^(r^i)&-(r<i)},n.isPow2=function(r){return!(r&r-1||!r)},n.log2=function(r){var i,n;return i=(r>65535)<<4,r>>>=i,n=(r>255)<<3,r>>>=n,i|=n,n=(r>15)<<2,r>>>=n,i|=n,n=(r>3)<<1,r>>>=n,i|=n,i|r>>1},n.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},n.popCount=function(r){return r-=r>>>1&1431655765,r=(858993459&r)+(r>>>2&858993459),16843009*(r+(r>>>4)&252645135)>>>24},n.countTrailingZeros=t,n.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1},n.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r-(r>>>1)},n.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,r&=15,27030>>>r&1};var s=new Array(256);!function(r){for(var i=0;i<256;++i){var n=i,t=i,a=7;for(n>>>=1;n;n>>>=1)t<<=1,t|=1&n,--a;r[i]=t<<a&255}}(s),n.reverse=function(r){return s[255&r]<<24|s[r>>>8&255]<<16|s[r>>>16&255]<<8|s[r>>>24&255]},n.interleave2=function(r,i){return r&=65535,r=16711935&(r|r<<8),r=252645135&(r|r<<4),r=858993459&(r|r<<2),r=1431655765&(r|r<<1),i&=65535,i=16711935&(i|i<<8),i=252645135&(i|i<<4),i=858993459&(i|i<<2),i=1431655765&(i|i<<1),r|i<<1},n.deinterleave2=function(r,i){return r=r>>>i&1431655765,r=858993459&(r|r>>>1),r=252645135&(r|r>>>2),r=16711935&(r|r>>>4),r=65535&(r|r>>>16),r<<16>>16},n.interleave3=function(r,i,n){return r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),i&=1023,i=4278190335&(i|i<<16),i=251719695&(i|i<<8),i=3272356035&(i|i<<4),i=1227133513&(i|i<<2),r|=i<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),r|n<<2},n.deinterleave3=function(r,i){return r=r>>>i&1227133513,r=3272356035&(r|r>>>2),r=251719695&(r|r>>>4),r=4278190335&(r|r>>>8),r=1023&(r|r>>>16),r<<22>>22},n.nextCombination=function(r){var i=r|r-1;return i+1|(~i&-~i)-1>>>t(r)+1}},{}],3:[function(r,i,n){(function(i){"use strict";function t(){try{var r=new Uint8Array(1);return r.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===r.foo()&&"function"==typeof r.subarray&&0===r.subarray(1,1).byteLength}catch(r){return!1}}function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(r,i){if(a()<i)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(i),r.__proto__=u.prototype):(null===r&&(r=new u(i)),r.length=i),r}function u(r,i,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(r,i,n);if("number"==typeof r){if("string"==typeof i)throw new Error("If encoding is specified then the first argument must be a string");return g(this,r)}return c(this,r,i,n)}function c(r,i,n,t){if("number"==typeof i)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer?v(r,i,n,t):"string"==typeof i?h(r,i,n):y(r,i)}function e(r){if("number"!=typeof r)throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function f(r,i,n,t){return e(i),i<=0?s(r,i):void 0!==n?"string"==typeof t?s(r,i).fill(n,t):s(r,i).fill(n):s(r,i)}function g(r,i){if(e(i),r=s(r,i<0?0:0|X(i)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<i;++n)r[n]=0;return r}function h(r,i,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var t=0|d(i,n);r=s(r,t);var a=r.write(i,n);return a!==t&&(r=r.slice(0,a)),r}function o(r,i){var n=i.length<0?0:0|X(i.length);r=s(r,n);for(var t=0;t<n;t+=1)r[t]=255&i[t];return r}function v(r,i,n,t){if(i.byteLength,n<0||i.byteLength<n)throw new RangeError("'offset' is out of bounds");if(i.byteLength<n+(t||0))throw new RangeError("'length' is out of bounds");return i=void 0===n&&void 0===t?new Uint8Array(i):void 0===t?new Uint8Array(i,n):new Uint8Array(i,n,t),u.TYPED_ARRAY_SUPPORT?(r=i,r.__proto__=u.prototype):r=o(r,i),r}function y(r,i){if(u.isBuffer(i)){var n=0|X(i.length);return r=s(r,n),0===r.length?r:(i.copy(r,0,0,n),r)}if(i){if("undefined"!=typeof ArrayBuffer&&i.buffer instanceof ArrayBuffer||"length"in i)return"number"!=typeof i.length||Y(i.length)?s(r,0):o(r,i);if("Buffer"===i.type&&_(i.data))return o(r,i.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function X(r){if(r>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|r}function b(r){return+r!=r&&(r=0),u.alloc(+r)}function d(r,i){if(u.isBuffer(r))return r.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;"string"!=typeof r&&(r=""+r);var n=r.length;if(0===n)return 0;for(var t=!1;;)switch(i){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return S(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(r).length;default:if(t)return S(r).length;i=(""+i).toLowerCase(),t=!0}}function j(r,i,n){var t=!1;if((void 0===i||i<0)&&(i=0),i>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,i>>>=0,n<=i)return"";for(r||(r="utf8");;)switch(r){case"hex":return G(this,i,n);case"utf8":case"utf-8":return C(this,i,n);case"ascii":return E(this,i,n);case"latin1":case"binary":return F(this,i,n);case"base64":return B(this,i,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,i,n);default:if(t)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),t=!0}}function k(r,i,n){var t=r[i];r[i]=r[n],r[n]=t}function l(r,i,n,t,a){if(0===r.length)return-1;if("string"==typeof n?(t=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:r.length-1),n<0&&(n=r.length+n),n>=r.length){if(a)return-1;n=r.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof i&&(i=u.from(i,t)),u.isBuffer(i))return 0===i.length?-1:m(r,i,n,t,a);if("number"==typeof i)return i=255&i,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(r,i,n):Uint8Array.prototype.lastIndexOf.call(r,i,n):m(r,[i],n,t,a);throw new TypeError("val must be string, number or Buffer")}function m(r,i,n,t,a){function s(r,i){return 1===u?r[i]:r.readUInt16BE(i*u)}var u=1,c=r.length,e=i.length;if(void 0!==t&&(t=String(t).toLowerCase(),"ucs2"===t||"ucs-2"===t||"utf16le"===t||"utf-16le"===t)){if(r.length<2||i.length<2)return-1;u=2,c/=2,e/=2,n/=2}var f;if(a){var g=-1;for(f=n;f<c;f++)if(s(r,f)===s(i,g===-1?0:f-g)){if(g===-1&&(g=f),f-g+1===e)return g*u}else g!==-1&&(f-=f-g),g=-1}else for(n+e>c&&(n=c-e),f=n;f>=0;f--){for(var h=!0,o=0;o<e;o++)if(s(r,f+o)!==s(i,o)){h=!1;break}if(h)return f}return-1}function p(r,i,n,t){n=Number(n)||0;var a=r.length-n;t?(t=Number(t),t>a&&(t=a)):t=a;var s=i.length;if(s%2!==0)throw new TypeError("Invalid hex string");t>s/2&&(t=s/2);for(var u=0;u<t;++u){var c=parseInt(i.substr(2*u,2),16);if(isNaN(c))return u;r[n+u]=c}return u}function q(r,i,n,t){return W(S(i,r.length-n),r,n,t)}function w(r,i,n,t){return W(T(i),r,n,t)}function x(r,i,n,t){return w(r,i,n,t)}function z(r,i,n,t){return W(V(i),r,n,t)}function A(r,i,n,t){return W(U(i,r.length-n),r,n,t)}function B(r,i,n){return 0===i&&n===r.length?Z.fromByteArray(r):Z.fromByteArray(r.slice(i,n))}function C(r,i,n){n=Math.min(r.length,n);for(var t=[],a=i;a<n;){var s=r[a],u=null,c=s>239?4:s>223?3:s>191?2:1;if(a+c<=n){var e,f,g,h;switch(c){case 1:s<128&&(u=s);break;case 2:e=r[a+1],128===(192&e)&&(h=(31&s)<<6|63&e,h>127&&(u=h));break;case 3:e=r[a+1],f=r[a+2],128===(192&e)&&128===(192&f)&&(h=(15&s)<<12|(63&e)<<6|63&f,h>2047&&(h<55296||h>57343)&&(u=h));break;case 4:e=r[a+1],f=r[a+2],g=r[a+3],128===(192&e)&&128===(192&f)&&128===(192&g)&&(h=(15&s)<<18|(63&e)<<12|(63&f)<<6|63&g,h>65535&&h<1114112&&(u=h))}}null===u?(u=65533,c=1):u>65535&&(u-=65536,t.push(u>>>10&1023|55296),u=56320|1023&u),t.push(u),a+=c}return D(t)}function D(r){var i=r.length;if(i<=rr)return String.fromCharCode.apply(String,r);for(var n="",t=0;t<i;)n+=String.fromCharCode.apply(String,r.slice(t,t+=rr));return n}function E(r,i,n){var t="";n=Math.min(r.length,n);for(var a=i;a<n;++a)t+=String.fromCharCode(127&r[a]);return t}function F(r,i,n){var t="";n=Math.min(r.length,n);for(var a=i;a<n;++a)t+=String.fromCharCode(r[a]);return t}function G(r,i,n){var t=r.length;(!i||i<0)&&(i=0),(!n||n<0||n>t)&&(n=t);for(var a="",s=i;s<n;++s)a+=R(r[s]);return a}function H(r,i,n){for(var t=r.slice(i,n),a="",s=0;s<t.length;s+=2)a+=String.fromCharCode(t[s]+256*t[s+1]);return a}function I(r,i,n){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+i>n)throw new RangeError("Trying to access beyond buffer length")}function J(r,i,n,t,a,s){if(!u.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>a||i<s)throw new RangeError('"value" argument is out of bounds');if(n+t>r.length)throw new RangeError("Index out of range")}function K(r,i,n,t){i<0&&(i=65535+i+1);for(var a=0,s=Math.min(r.length-n,2);a<s;++a)r[n+a]=(i&255<<8*(t?a:1-a))>>>8*(t?a:1-a)}function L(r,i,n,t){i<0&&(i=4294967295+i+1);for(var a=0,s=Math.min(r.length-n,4);a<s;++a)r[n+a]=i>>>8*(t?a:3-a)&255}function M(r,i,n,t,a,s){if(n+t>r.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(r,i,n,t,a){return a||M(r,i,n,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(r,i,n,t,23,4),n+4}function O(r,i,n,t,a){return a||M(r,i,n,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(r,i,n,t,52,8),n+8}function P(r){if(r=Q(r).replace(ir,""),r.length<2)return"";for(;r.length%4!==0;)r+="=";return r}function Q(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function R(r){return r<16?"0"+r.toString(16):r.toString(16)}function S(r,i){i=i||1/0;for(var n,t=r.length,a=null,s=[],u=0;u<t;++u){if(n=r.charCodeAt(u),n>55295&&n<57344){if(!a){if(n>56319){(i-=3)>-1&&s.push(239,191,189);continue}if(u+1===t){(i-=3)>-1&&s.push(239,191,189);continue}a=n;continue}if(n<56320){(i-=3)>-1&&s.push(239,191,189),a=n;continue}n=(a-55296<<10|n-56320)+65536}else a&&(i-=3)>-1&&s.push(239,191,189);if(a=null,n<128){if((i-=1)<0)break;s.push(n)}else if(n<2048){if((i-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((i-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((i-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function T(r){for(var i=[],n=0;n<r.length;++n)i.push(255&r.charCodeAt(n));return i}function U(r,i){for(var n,t,a,s=[],u=0;u<r.length&&!((i-=2)<0);++u)n=r.charCodeAt(u),t=n>>8,a=n%256,s.push(a),s.push(t);return s}function V(r){return Z.toByteArray(P(r))}function W(r,i,n,t){for(var a=0;a<t&&!(a+n>=i.length||a>=r.length);++a)i[a+n]=r[a];return a}function Y(r){return r!==r}var Z=r("base64-js"),$=r("ieee754"),_=r("isarray");n.Buffer=u,n.SlowBuffer=b,n.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==i.TYPED_ARRAY_SUPPORT?i.TYPED_ARRAY_SUPPORT:t(),n.kMaxLength=a(),u.poolSize=8192,u._augment=function(r){return r.__proto__=u.prototype,r},u.from=function(r,i,n){return c(null,r,i,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(r,i,n){return f(null,r,i,n)},u.allocUnsafe=function(r){return g(null,r)},u.allocUnsafeSlow=function(r){return g(null,r)},u.isBuffer=function(r){return!(null==r||!r._isBuffer)},u.compare=function(r,i){if(!u.isBuffer(r)||!u.isBuffer(i))throw new TypeError("Arguments must be Buffers");if(r===i)return 0;for(var n=r.length,t=i.length,a=0,s=Math.min(n,t);a<s;++a)if(r[a]!==i[a]){n=r[a],t=i[a];break}return n<t?-1:t<n?1:0},u.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(r,i){if(!_(r))throw new TypeError('"list" argument must be an Array of Buffers');if(0===r.length)return u.alloc(0);var n;if(void 0===i)for(i=0,n=0;n<r.length;++n)i+=r[n].length;var t=u.allocUnsafe(i),a=0;for(n=0;n<r.length;++n){var s=r[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(t,a),a+=s.length}return t},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var r=this.length;if(r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<r;i+=2)k(this,i,i+1);return this},u.prototype.swap32=function(){var r=this.length;if(r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<r;i+=4)k(this,i,i+3),k(this,i+1,i+2);return this},u.prototype.swap64=function(){var r=this.length;if(r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<r;i+=8)k(this,i,i+7),k(this,i+1,i+6),k(this,i+2,i+5),k(this,i+3,i+4);return this},u.prototype.toString=function(){var r=0|this.length;return 0===r?"":0===arguments.length?C(this,0,r):j.apply(this,arguments)},u.prototype.equals=function(r){if(!u.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r||0===u.compare(this,r)},u.prototype.inspect=function(){var r="",i=n.INSPECT_MAX_BYTES;return this.length>0&&(r=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(r+=" ... ")),"<Buffer "+r+">"},u.prototype.compare=function(r,i,n,t,a){if(!u.isBuffer(r))throw new TypeError("Argument must be a Buffer");if(void 0===i&&(i=0),void 0===n&&(n=r?r.length:0),void 0===t&&(t=0),void 0===a&&(a=this.length),i<0||n>r.length||t<0||a>this.length)throw new RangeError("out of range index");if(t>=a&&i>=n)return 0;if(t>=a)return-1;if(i>=n)return 1;if(i>>>=0,n>>>=0,t>>>=0,a>>>=0,this===r)return 0;for(var s=a-t,c=n-i,e=Math.min(s,c),f=this.slice(t,a),g=r.slice(i,n),h=0;h<e;++h)if(f[h]!==g[h]){s=f[h],c=g[h];break}return s<c?-1:c<s?1:0},u.prototype.includes=function(r,i,n){return this.indexOf(r,i,n)!==-1},u.prototype.indexOf=function(r,i,n){return l(this,r,i,n,!0)},u.prototype.lastIndexOf=function(r,i,n){return l(this,r,i,n,!1)},u.prototype.write=function(r,i,n,t){if(void 0===i)t="utf8",n=this.length,i=0;else if(void 0===n&&"string"==typeof i)t=i,n=this.length,i=0;else{if(!isFinite(i))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");i=0|i,isFinite(n)?(n=0|n,void 0===t&&(t="utf8")):(t=n,n=void 0)}var a=this.length-i;if((void 0===n||n>a)&&(n=a),r.length>0&&(n<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");t||(t="utf8");for(var s=!1;;)switch(t){case"hex":return p(this,r,i,n);case"utf8":case"utf-8":return q(this,r,i,n);case"ascii":return w(this,r,i,n);case"latin1":case"binary":return x(this,r,i,n);case"base64":return z(this,r,i,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,r,i,n);default:if(s)throw new TypeError("Unknown encoding: "+t);t=(""+t).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var rr=4096;u.prototype.slice=function(r,i){var n=this.length;r=~~r,i=void 0===i?n:~~i,r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),i<0?(i+=n,i<0&&(i=0)):i>n&&(i=n),i<r&&(i=r);var t;if(u.TYPED_ARRAY_SUPPORT)t=this.subarray(r,i),t.__proto__=u.prototype;else{var a=i-r;t=new u(a,void 0);for(var s=0;s<a;++s)t[s]=this[s+r]}return t},u.prototype.readUIntLE=function(r,i,n){r=0|r,i=0|i,n||I(r,i,this.length);for(var t=this[r],a=1,s=0;++s<i&&(a*=256);)t+=this[r+s]*a;return t},u.prototype.readUIntBE=function(r,i,n){r=0|r,i=0|i,n||I(r,i,this.length);for(var t=this[r+--i],a=1;i>0&&(a*=256);)t+=this[r+--i]*a;return t},u.prototype.readUInt8=function(r,i){return i||I(r,1,this.length),this[r]},u.prototype.readUInt16LE=function(r,i){return i||I(r,2,this.length),this[r]|this[r+1]<<8},u.prototype.readUInt16BE=function(r,i){return i||I(r,2,this.length),this[r]<<8|this[r+1]},u.prototype.readUInt32LE=function(r,i){return i||I(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},u.prototype.readUInt32BE=function(r,i){return i||I(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},u.prototype.readIntLE=function(r,i,n){r=0|r,i=0|i,n||I(r,i,this.length);for(var t=this[r],a=1,s=0;++s<i&&(a*=256);)t+=this[r+s]*a;return a*=128,t>=a&&(t-=Math.pow(2,8*i)),t},u.prototype.readIntBE=function(r,i,n){r=0|r,i=0|i,n||I(r,i,this.length);for(var t=i,a=1,s=this[r+--t];t>0&&(a*=256);)s+=this[r+--t]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*i)),s},u.prototype.readInt8=function(r,i){return i||I(r,1,this.length),128&this[r]?(255-this[r]+1)*-1:this[r]},u.prototype.readInt16LE=function(r,i){i||I(r,2,this.length);var n=this[r]|this[r+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(r,i){i||I(r,2,this.length);var n=this[r+1]|this[r]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(r,i){return i||I(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},u.prototype.readInt32BE=function(r,i){return i||I(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},u.prototype.readFloatLE=function(r,i){return i||I(r,4,this.length),$.read(this,r,!0,23,4)},u.prototype.readFloatBE=function(r,i){return i||I(r,4,this.length),$.read(this,r,!1,23,4)},u.prototype.readDoubleLE=function(r,i){return i||I(r,8,this.length),$.read(this,r,!0,52,8)},u.prototype.readDoubleBE=function(r,i){return i||I(r,8,this.length),$.read(this,r,!1,52,8)},u.prototype.writeUIntLE=function(r,i,n,t){if(r=+r,i=0|i,n=0|n,!t){var a=Math.pow(2,8*n)-1;J(this,r,i,n,a,0)}var s=1,u=0;for(this[i]=255&r;++u<n&&(s*=256);)this[i+u]=r/s&255;return i+n},u.prototype.writeUIntBE=function(r,i,n,t){if(r=+r,i=0|i,n=0|n,!t){var a=Math.pow(2,8*n)-1;J(this,r,i,n,a,0)}var s=n-1,u=1;for(this[i+s]=255&r;--s>=0&&(u*=256);)this[i+s]=r/u&255;return i+n},u.prototype.writeUInt8=function(r,i,n){return r=+r,i=0|i,n||J(this,r,i,1,255,0),u.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),this[i]=255&r,i+1},u.prototype.writeUInt16LE=function(r,i,n){return r=+r,i=0|i,n||J(this,r,i,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[i]=255&r,this[i+1]=r>>>8):K(this,r,i,!0),i+2},u.prototype.writeUInt16BE=function(r,i,n){return r=+r,i=0|i,n||J(this,r,i,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[i]=r>>>8,this[i+1]=255&r):K(this,r,i,!1),i+2},u.prototype.writeUInt32LE=function(r,i,n){return r=+r,i=0|i,n||J(this,r,i,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[i+3]=r>>>24,this[i+2]=r>>>16,this[i+1]=r>>>8,this[i]=255&r):L(this,r,i,!0),i+4},u.prototype.writeUInt32BE=function(r,i,n){return r=+r,i=0|i,n||J(this,r,i,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[i]=r>>>24,this[i+1]=r>>>16,this[i+2]=r>>>8,this[i+3]=255&r):L(this,r,i,!1),i+4},u.prototype.writeIntLE=function(r,i,n,t){if(r=+r,i=0|i,!t){var a=Math.pow(2,8*n-1);J(this,r,i,n,a-1,-a)}var s=0,u=1,c=0;for(this[i]=255&r;++s<n&&(u*=256);)r<0&&0===c&&0!==this[i+s-1]&&(c=1),this[i+s]=(r/u>>0)-c&255;return i+n},u.prototype.writeIntBE=function(r,i,n,t){if(r=+r,i=0|i,!t){var a=Math.pow(2,8*n-1);J(this,r,i,n,a-1,-a)}var s=n-1,u=1,c=0;for(this[i+s]=255&r;--s>=0&&(u*=256);)r<0&&0===c&&0!==this[i+s+1]&&(c=1),this[i+s]=(r/u>>0)-c&255;return i+n},u.prototype.writeInt8=function(r,i,n){return r=+r,i=0|i,n||J(this,r,i,1,127,-128),u.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),r<0&&(r=255+r+1),this[i]=255&r,i+1},u.prototype.writeInt16LE=function(r,i,n){return r=+r,i=0|i,n||J(this,r,i,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[i]=255&r,this[i+1]=r>>>8):K(this,r,i,!0),i+2},u.prototype.writeInt16BE=function(r,i,n){return r=+r,i=0|i,n||J(this,r,i,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[i]=r>>>8,this[i+1]=255&r):K(this,r,i,!1),i+2},u.prototype.writeInt32LE=function(r,i,n){return r=+r,i=0|i,n||J(this,r,i,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[i]=255&r,this[i+1]=r>>>8,this[i+2]=r>>>16,this[i+3]=r>>>24):L(this,r,i,!0),i+4},u.prototype.writeInt32BE=function(r,i,n){return r=+r,i=0|i,n||J(this,r,i,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),u.TYPED_ARRAY_SUPPORT?(this[i]=r>>>24,this[i+1]=r>>>16,this[i+2]=r>>>8,this[i+3]=255&r):L(this,r,i,!1),i+4},u.prototype.writeFloatLE=function(r,i,n){return N(this,r,i,!0,n)},u.prototype.writeFloatBE=function(r,i,n){return N(this,r,i,!1,n)},u.prototype.writeDoubleLE=function(r,i,n){return O(this,r,i,!0,n)},u.prototype.writeDoubleBE=function(r,i,n){return O(this,r,i,!1,n)},u.prototype.copy=function(r,i,n,t){if(n||(n=0),t||0===t||(t=this.length),i>=r.length&&(i=r.length),i||(i=0),t>0&&t<n&&(t=n),t===n)return 0;if(0===r.length||0===this.length)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(t<0)throw new RangeError("sourceEnd out of bounds");t>this.length&&(t=this.length),r.length-i<t-n&&(t=r.length-i+n);var a,s=t-n;if(this===r&&n<i&&i<t)for(a=s-1;a>=0;--a)r[a+i]=this[a+n];else if(s<1e3||!u.TYPED_ARRAY_SUPPORT)for(a=0;a<s;++a)r[a+i]=this[a+n];else Uint8Array.prototype.set.call(r,this.subarray(n,n+s),i);return s},u.prototype.fill=function(r,i,n,t){if("string"==typeof r){if("string"==typeof i?(t=i,i=0,n=this.length):"string"==typeof n&&(t=n,n=this.length),1===r.length){var a=r.charCodeAt(0);a<256&&(r=a)}if(void 0!==t&&"string"!=typeof t)throw new TypeError("encoding must be a string");if("string"==typeof t&&!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t)}else"number"==typeof r&&(r=255&r);if(i<0||this.length<i||this.length<n)throw new RangeError("Out of range index");if(n<=i)return this;i>>>=0,n=void 0===n?this.length:n>>>0,r||(r=0);var s;if("number"==typeof r)for(s=i;s<n;++s)this[s]=r;else{var c=u.isBuffer(r)?r:S(new u(r,t).toString()),e=c.length;for(s=0;s<n-i;++s)this[s+i]=c[s%e]}return this};var ir=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":1,ieee754:10,isarray:4}],4:[function(r,i,n){var t={}.toString;i.exports=Array.isArray||function(r){return"[object Array]"==t.call(r)}},{}],5:[function(r,i,n){"use strict";function t(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function a(r){var i=new t;i.pre=r.pre,i.body=r.body,i.post=r.post;var n=r.args.slice(0);i.argTypes=n;for(var a=0;a<n.length;++a){var u=n[a];if("array"===u||"object"==typeof u&&u.blockIndices){if(i.argTypes[a]="array",i.arrayArgs.push(a),i.arrayBlockIndices.push(u.blockIndices?u.blockIndices:0),i.shimArgs.push("array"+a),a<i.pre.args.length&&i.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array args");if(a<i.post.args.length&&i.post.args[a].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===u)i.scalarArgs.push(a),i.shimArgs.push("scalar"+a);else if("index"===u){if(i.indexArgs.push(a),a<i.pre.args.length&&i.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array index");if(a<i.body.args.length&&i.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array index");if(a<i.post.args.length&&i.post.args[a].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===u){if(i.shapeArgs.push(a),a<i.pre.args.length&&i.pre.args[a].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(a<i.body.args.length&&i.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array shape");if(a<i.post.args.length&&i.post.args[a].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof u||!u.offset)throw new Error("cwise: Unknown argument type "+n[a]);i.argTypes[a]="offset",i.offsetArgs.push({array:u.array,offset:u.offset}),i.offsetArgIndex.push(a)}}if(i.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(i.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(i.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(i.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return i.debug=!!r.printCode||!!r.debug,i.funcName=r.funcName||"cwise",i.blockSize=r.blockSize||64,s(i)}var s=r("./lib/thunk.js");i.exports=a},{"./lib/thunk.js":7}],6:[function(r,i,n){"use strict";function t(r,i,n){var t,a,s=r.length,u=i.arrayArgs.length,c=i.indexArgs.length>0,e=[],f=[],g=0,h=0;for(t=0;t<s;++t)f.push(["i",t,"=0"].join(""));for(a=0;a<u;++a)for(t=0;t<s;++t)h=g,g=r[t],0===t?f.push(["d",a,"s",t,"=t",a,"p",g].join("")):f.push(["d",a,"s",t,"=(t",a,"p",g,"-s",h,"*t",a,"p",h,")"].join(""));for(e.push("var "+f.join(",")),t=s-1;t>=0;--t)g=r[t],e.push(["for(i",t,"=0;i",t,"<s",g,";++i",t,"){"].join(""));for(e.push(n),t=0;t<s;++t){for(h=g,g=r[t],a=0;a<u;++a)e.push(["p",a,"+=d",a,"s",t].join(""));c&&(t>0&&e.push(["index[",h,"]-=s",h].join("")),e.push(["++index[",g,"]"].join(""))),e.push("}")}return e.join("\n")}function a(r,i,n,a){for(var s=i.length,u=n.arrayArgs.length,c=n.blockSize,e=n.indexArgs.length>0,f=[],g=0;g<u;++g)f.push(["var offset",g,"=p",g].join(""));for(var g=r;g<s;++g)f.push(["for(var j"+g+"=SS[",i[g],"]|0;j",g,">0;){"].join("")),f.push(["if(j",g,"<",c,"){"].join("")),f.push(["s",i[g],"=j",g].join("")),f.push(["j",g,"=0"].join("")),f.push(["}else{s",i[g],"=",c].join("")),f.push(["j",g,"-=",c,"}"].join("")),e&&f.push(["index[",i[g],"]=j",g].join(""));for(var g=0;g<u;++g){for(var h=["offset"+g],o=r;o<s;++o)h.push(["j",o,"*t",g,"p",i[o]].join(""));f.push(["p",g,"=(",h.join("+"),")"].join(""))}f.push(t(i,n,a));for(var g=r;g<s;++g)f.push("}");return f.join("\n")}function s(r){for(var i=0,n=r[0].length;i<n;){for(var t=1;t<r.length;++t)if(r[t][i]!==r[0][i])return i;++i}return i}function u(r,i,n){for(var t=r.body,a=[],s=[],u=0;u<r.args.length;++u){var c=r.args[u];if(!(c.count<=0)){var e=new RegExp(c.name,"g"),f="",g=i.arrayArgs.indexOf(u);switch(i.argTypes[u]){case"offset":var h=i.offsetArgIndex.indexOf(u),o=i.offsetArgs[h];g=o.array,f="+q"+h;case"array":f="p"+g+f;var v="l"+u,y="a"+g;if(0===i.arrayBlockIndices[g])1===c.count?"generic"===n[g]?c.lvalue?(a.push(["var ",v,"=",y,".get(",f,")"].join("")),t=t.replace(e,v),s.push([y,".set(",f,",",v,")"].join(""))):t=t.replace(e,[y,".get(",f,")"].join("")):t=t.replace(e,[y,"[",f,"]"].join("")):"generic"===n[g]?(a.push(["var ",v,"=",y,".get(",f,")"].join("")),t=t.replace(e,v),c.lvalue&&s.push([y,".set(",f,",",v,")"].join(""))):(a.push(["var ",v,"=",y,"[",f,"]"].join("")),t=t.replace(e,v),c.lvalue&&s.push([y,"[",f,"]=",v].join("")));else{for(var X=[c.name],b=[f],d=0;d<Math.abs(i.arrayBlockIndices[g]);d++)X.push("\\s*\\[([^\\]]+)\\]"),b.push("$"+(d+1)+"*t"+g+"b"+d);if(e=new RegExp(X.join(""),"g"),f=b.join("+"),"generic"===n[g])throw new Error("cwise: Generic arrays not supported in combination with blocks!");t=t.replace(e,[y,"[",f,"]"].join(""))}break;case"scalar":t=t.replace(e,"Y"+i.scalarArgs.indexOf(u));break;case"index":t=t.replace(e,"index");break;case"shape":t=t.replace(e,"shape")}}}return[a.join("\n"),t,s.join("\n")].join("\n").trim()}function c(r){for(var i=new Array(r.length),n=!0,t=0;t<r.length;++t){var a=r[t],s=a.match(/\d+/);s=s?s[0]:"",0===a.charAt(0)?i[t]="u"+a.charAt(1)+s:i[t]=a.charAt(0)+s,t>0&&(n=n&&i[t]===i[t-1])}return n?i[0]:i.join("")}function e(r,i){for(var n=i[1].length-Math.abs(r.arrayBlockIndices[0])|0,e=new Array(r.arrayArgs.length),g=new Array(r.arrayArgs.length),h=0;h<r.arrayArgs.length;++h)g[h]=i[2*h],e[h]=i[2*h+1];for(var o=[],v=[],y=[],X=[],b=[],h=0;h<r.arrayArgs.length;++h){r.arrayBlockIndices[h]<0?(y.push(0),X.push(n),o.push(n),v.push(n+r.arrayBlockIndices[h])):(y.push(r.arrayBlockIndices[h]),X.push(r.arrayBlockIndices[h]+n),o.push(0),v.push(r.arrayBlockIndices[h]));for(var d=[],j=0;j<e[h].length;j++)y[h]<=e[h][j]&&e[h][j]<X[h]&&d.push(e[h][j]-y[h]);b.push(d)}for(var k=["SS"],l=["'use strict'"],m=[],j=0;j<n;++j)m.push(["s",j,"=SS[",j,"]"].join(""));for(var h=0;h<r.arrayArgs.length;++h){k.push("a"+h),k.push("t"+h),k.push("p"+h);for(var j=0;j<n;++j)m.push(["t",h,"p",j,"=t",h,"[",y[h]+j,"]"].join(""));for(var j=0;j<Math.abs(r.arrayBlockIndices[h]);++j)m.push(["t",h,"b",j,"=t",h,"[",o[h]+j,"]"].join(""))}for(var h=0;h<r.scalarArgs.length;++h)k.push("Y"+h);if(r.shapeArgs.length>0&&m.push("shape=SS.slice(0)"),r.indexArgs.length>0){for(var p=new Array(n),h=0;h<n;++h)p[h]="0";m.push(["index=[",p.join(","),"]"].join(""))}for(var h=0;h<r.offsetArgs.length;++h){for(var q=r.offsetArgs[h],w=[],j=0;j<q.offset.length;++j)0!==q.offset[j]&&(1===q.offset[j]?w.push(["t",q.array,"p",j].join("")):w.push([q.offset[j],"*t",q.array,"p",j].join("")));0===w.length?m.push("q"+h+"=0"):m.push(["q",h,"=",w.join("+")].join(""))}var x=f([].concat(r.pre.thisVars).concat(r.body.thisVars).concat(r.post.thisVars));m=m.concat(x),l.push("var "+m.join(","));for(var h=0;h<r.arrayArgs.length;++h)l.push("p"+h+"|=0");r.pre.body.length>3&&l.push(u(r.pre,r,g));var z=u(r.body,r,g),A=s(b);A<n?l.push(a(A,b[0],r,z)):l.push(t(b[0],r,z)),r.post.body.length>3&&l.push(u(r.post,r,g)),r.debug&&console.log("-----Generated cwise routine for ",i,":\n"+l.join("\n")+"\n----------");var B=[r.funcName||"unnamed","_cwise_loop_",e[0].join("s"),"m",A,c(g)].join(""),C=new Function(["function ",B,"(",k.join(","),"){",l.join("\n"),"} return ",B].join(""));return C()}var f=r("uniq");i.exports=e},{uniq:22}],7:[function(r,i,n){"use strict";
function t(r){var i=["'use strict'","var CACHED={}"],n=[],t=r.funcName+"_cwise_thunk";i.push(["return function ",t,"(",r.shimArgs.join(","),"){"].join(""));for(var s=[],u=[],c=[["array",r.arrayArgs[0],".shape.slice(",Math.max(0,r.arrayBlockIndices[0]),r.arrayBlockIndices[0]<0?","+r.arrayBlockIndices[0]+")":")"].join("")],e=[],f=[],g=0;g<r.arrayArgs.length;++g){var h=r.arrayArgs[g];n.push(["t",h,"=array",h,".dtype,","r",h,"=array",h,".order"].join("")),s.push("t"+h),s.push("r"+h),u.push("t"+h),u.push("r"+h+".join()"),c.push("array"+h+".data"),c.push("array"+h+".stride"),c.push("array"+h+".offset|0"),g>0&&(e.push("array"+r.arrayArgs[0]+".shape.length===array"+h+".shape.length+"+(Math.abs(r.arrayBlockIndices[0])-Math.abs(r.arrayBlockIndices[g]))),f.push("array"+r.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[0])+"]===array"+h+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[g])+"]"))}r.arrayArgs.length>1&&(i.push("if (!("+e.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),i.push("for(var shapeIndex=array"+r.arrayArgs[0]+".shape.length-"+Math.abs(r.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),i.push("if (!("+f.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),i.push("}"));for(var g=0;g<r.scalarArgs.length;++g)c.push("scalar"+r.scalarArgs[g]);n.push(["type=[",u.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),i.push("var "+n.join(",")),i.push(["if(!proc){","CACHED[type]=proc=compile([",s.join(","),"])}","return proc(",c.join(","),")}"].join("")),r.debug&&console.log("-----Generated thunk:\n"+i.join("\n")+"\n----------");var o=new Function("compile",i.join("\n"));return o(a.bind(void 0,r))}var a=r("./compile.js");i.exports=t},{"./compile.js":6}],8:[function(r,i,n){i.exports=r("cwise-compiler")},{"cwise-compiler":5}],9:[function(r,i,n){"use strict";function t(r,i,n){var a=0|r[n];if(a<=0)return[];var s,u=new Array(a);if(n===r.length-1)for(s=0;s<a;++s)u[s]=i;else for(s=0;s<a;++s)u[s]=t(r,i,n+1);return u}function a(r,i){var n,t;for(n=new Array(r),t=0;t<r;++t)n[t]=i;return n}function s(r,i){switch("undefined"==typeof i&&(i=0),typeof r){case"number":if(r>0)return a(0|r,i);break;case"object":if("number"==typeof r.length)return t(r,i,0)}return[]}i.exports=s},{}],10:[function(r,i,n){n.read=function(r,i,n,t,a){var s,u,c=8*a-t-1,e=(1<<c)-1,f=e>>1,g=-7,h=n?a-1:0,o=n?-1:1,v=r[i+h];for(h+=o,s=v&(1<<-g)-1,v>>=-g,g+=c;g>0;s=256*s+r[i+h],h+=o,g-=8);for(u=s&(1<<-g)-1,s>>=-g,g+=t;g>0;u=256*u+r[i+h],h+=o,g-=8);if(0===s)s=1-f;else{if(s===e)return u?NaN:(v?-1:1)*(1/0);u+=Math.pow(2,t),s-=f}return(v?-1:1)*u*Math.pow(2,s-t)},n.write=function(r,i,n,t,a,s){var u,c,e,f=8*s-a-1,g=(1<<f)-1,h=g>>1,o=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,v=t?0:s-1,y=t?1:-1,X=i<0||0===i&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(c=isNaN(i)?1:0,u=g):(u=Math.floor(Math.log(i)/Math.LN2),i*(e=Math.pow(2,-u))<1&&(u--,e*=2),i+=u+h>=1?o/e:o*Math.pow(2,1-h),i*e>=2&&(u++,e/=2),u+h>=g?(c=0,u=g):u+h>=1?(c=(i*e-1)*Math.pow(2,a),u+=h):(c=i*Math.pow(2,h-1)*Math.pow(2,a),u=0));a>=8;r[n+v]=255&c,v+=y,c/=256,a-=8);for(u=u<<a|c,f+=a;f>0;r[n+v]=255&u,v+=y,u/=256,f-=8);r[n+v-y]|=128*X}},{}],11:[function(r,i,n){"use strict";function t(r){for(var i=new Array(r),n=0;n<r;++n)i[n]=n;return i}i.exports=t},{}],12:[function(r,i,n){function t(r){return!!r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}function a(r){return"function"==typeof r.readFloatLE&&"function"==typeof r.slice&&t(r.slice(0,0))}i.exports=function(r){return null!=r&&(t(r)||a(r)||!!r._isBuffer)}},{}],13:[function(r,i,n){"use strict";function t(r,i,n){var t,e,f=i.shape,g=f.length,h=1,o=new Array(g),v=0;for(t=g-1;t>=0;--t)if(o[t]=h,h*=f[t],v=Math.max(v,c.scratchMemory(f[t])),i.shape[t]!==n.shape[t])throw new Error("Shape mismatch, real and imaginary arrays must have same size");var y,X=4*h+v;y="array"===i.dtype||"float64"===i.dtype||"custom"===i.dtype?u.mallocDouble(X):u.mallocFloat(X);var b,d,j,k,l=s(y,f.slice(0),o,0),m=s(y,f.slice(0),o.slice(0),h),p=s(y,f.slice(0),o.slice(0),2*h),q=s(y,f.slice(0),o.slice(0),3*h),w=4*h;for(a.assign(l,i),a.assign(m,n),t=g-1;t>=0&&(c(r,h/f[t],f[t],y,l.offset,m.offset,w),0!==t);--t){for(d=1,j=p.stride,k=q.stride,e=t-1;e<g;++e)k[e]=j[e]=d,d*=f[e];for(e=t-2;e>=0;--e)k[e]=j[e]=d,d*=f[e];a.assign(p,l),a.assign(q,m),b=l,l=p,p=b,b=m,m=q,q=b}a.assign(i,l),a.assign(n,m),u.free(y)}var a=r("ndarray-ops"),s=r("ndarray"),u=r("typedarray-pool"),c=r("./lib/fft-matrix.js");i.exports=t},{"./lib/fft-matrix.js":14,ndarray:18,"ndarray-ops":17,"typedarray-pool":21}],14:[function(r,i,n){function t(r,i,n,t,a,e,f){r|=0,i|=0,n|=0,a|=0,e|=0,c.isPow2(n)?s(r,i,n,t,a,e):u(r,i,n,t,a,e,f)}function a(r){return c.isPow2(r)?0:2*r+4*c.nextPow2(2*r+1)}function s(r,i,n,t,a,s){r|=0,i|=0,n|=0,a|=0,s|=0;var u,e,f,g,h,o,v,y,X,b,d,j,k,l,m,p,q,w,x,z,A,B,C,D,E;for(u=n,e=c.log2(u),w=0;w<i;++w){for(v=u>>1,h=0,f=0;f<u-1;f++){for(f<h&&(k=t[a+f],t[a+f]=t[a+h],t[a+h]=k,k=t[s+f],t[s+f]=t[s+h],t[s+h]=k),o=v;o<=h;)h-=o,o>>=1;h+=o}for(d=-1,j=0,b=1,y=0;y<e;y++){for(X=b,b<<=1,p=1,q=0,h=0;h<X;h++){for(f=h;f<u;f+=b)g=f+X,x=t[a+g],z=t[s+g],A=t[a+f],B=t[s+f],C=p*(x+z),D=x*(q-p),E=z*(p+q),l=C-E,m=C+D,t[a+g]=A-l,t[s+g]=B-m,t[a+f]+=l,t[s+f]+=m;C=d*(p+q),D=p*(j-d),E=q*(d+j),p=C-E,q=C+D}j=Math.sqrt((1-d)/2),r<0&&(j=-j),d=Math.sqrt((1+d)/2)}if(r<0){var F=1/u;for(f=0;f<u;f++)t[a+f]*=F,t[s+f]*=F}a+=n,s+=n}}function u(r,i,n,t,a,u,e){r|=0,i|=0,n|=0,a|=0,u|=0,e|=0;var f,g,h,o,v,y,X,b,d,j=c.nextPow2(2*n+1),k=e,l=k+n,m=l+n,p=m+j,q=p+j,w=q+j,x=-r*Math.PI/n;for(d=0;d<n;++d)g=x*(d*d%(2*n)),o=Math.cos(g),v=Math.sin(g),t[q+(j-d)]=t[q+d]=t[k+d]=o,t[w+(j-d)]=t[w+d]=t[l+d]=v;for(d=n;d<=j-n;++d)t[q+d]=0;for(d=n;d<=j-n;++d)t[w+d]=0;for(s(1,1,j,t,q,w),x=r<0?1/n:1,f=0;f<i;++f){for(d=0;d<n;++d)g=t[a+d],h=t[u+d],o=t[k+d],v=-t[l+d],y=o*(g+h),X=g*(v-o),b=h*(o+v),t[m+d]=y-b,t[p+d]=y+X;for(d=n;d<j;++d)t[m+d]=0;for(d=n;d<j;++d)t[p+d]=0;for(s(1,1,j,t,m,p),d=0;d<j;++d)g=t[m+d],h=t[p+d],o=t[q+d],v=t[w+d],y=o*(g+h),X=g*(v-o),b=h*(o+v),t[m+d]=y-b,t[p+d]=y+X;for(s(-1,1,j,t,m,p),d=0;d<n;++d)g=t[m+d],h=t[p+d],o=t[k+d],v=-t[l+d],y=o*(g+h),X=g*(v-o),b=h*(o+v),t[a+d]=x*(y-b),t[u+d]=x*(y+X);a+=n,u+=n}}var c=r("bit-twiddle");i.exports=t,i.exports.scratchMemory=a},{"bit-twiddle":2}],15:[function(r,i,n){"use strict";function t(r){return Array.isArray(r)?[r.length,r[0].length]:r.shape}function a(r,i,n){var a=t(r),s=t(i),u=t(n);if(a[0]!==s[0]||a[1]!==u[1]||s[1]!==u[0])throw new Error("Mismatched array shapes for matrix product")}function s(r){if(Array.isArray(r)){if(Array.isArray(r))return["r","native"]}else if(r.shape&&2===r.shape.length)return r.order[0]?["r",r.dtype]:["c",r.dtype];throw new Error("Unrecognized data type")}function u(r,i,n,t,u){void 0===t&&(t=1),void 0===u&&(u=0);var f=1!==t,g=0!==u,h=s(r),o=s(i),v=s(n);a(r,i,n);var y=[h,o,v,f,g].join(":"),X=e[y];return X||(X=e[y]=c(h,o,v,f,g)),X(r,i,n,t,u)}i.exports=u;var c=r("./lib/planner.js"),e={}},{"./lib/planner.js":16}],16:[function(r,i,n){"use strict";function t(r,i){return"native"===i[1]?[r,"d0=",r,".length,",r,"d1=",r,"[0].length,"].join(""):[r,"d0=",r,".shape[0],",r,"d1=",r,".shape[1],",r,"s0=",r,".stride[0],",r,"s1=",r,".stride[1],",r,"o=",r,".offset,",r,"d=",r,".data,"].join("")}function a(r,i,n,t,a,s){var u=[];return"native"===n[1]?r[0]&&(t?u.push("var ",i,"p=",i,"[",t,"];"):u.push("var ",i,"p=",i,"[0];")):t&&a?s?u.push("var ",i,"t0=",i,"s",r[0],",",i,"t1=",i,"s",r[1],"-",i,"s",r[0],"*",s,",",i,"p=",i,"o+",t,"*",i,"s0+",a,"*",i,"s1;"):u.push("var ",i,"t0=",i,"s",r[0],",",i,"p=",i,"o+",t,"*",i,"s0+",a,"*",i,"s1;"):t?u.push("var ",i,"t0=",i,"s",r[0],",",i,"p=",i,"o+",t,"*",i,"s0;"):a?u.push("var ",i,"t0=",i,"s",r[0],",",i,"p=",i,"o+",a,"*",i,"s1;"):u.push("var ",i,"t0=",i,"s",r[0],",",i,"t1=",i,"s",r[1],"-",i,"s",r[0],"*",i,"d",r[0],",",i,"p=",i,"o;"),u}function s(r,i,n,t,a){var s=[];return"native"===n[1]?r[0]&&1===t&&s.push(i,"p=",i,"[",a,"+1]"):s.push(i,"p+=",i,"t",t,";"),s}function u(r,i,n,t,a,s){var u=[];return"native"===n[1]?r[0]?u.push(i,"p[",a,"]=",s,";"):u.push(i,"[",t,"][",a,"]=",s,";"):"generic"===n[1]?u.push(i,"d.set(",i,"p,",s,");"):u.push(i,"d[",i,"p]=",s,";"),u}function c(r,i,n,t,a){var s=[];return"native"===n[1]?r[0]?s.push(i,"p[",a,"]"):s.push(i,"[",t,"][",a,"]"):"generic"===n[1]?s.push(i,"d.get(",i,"p)"):s.push(i,"d[",i,"p]"),s.join("")}function e(r,i,n,t,e){var f=[],g="r"===r[0]?[1,0]:[0,1],h=[1,0],o=[0,1],v=["i","j"];return f.push.apply(f,a(g,"o",r)),g[1]?(f.push("for(j=0;j<od1;++j){"),f.push("for(i=0;i<od0;++i){")):(f.push("for(i=0;i<od0;++i){"),f.push("for(j=0;j<od1;++j){")),f.push.apply(f,a(h,"a",i,"i")),f.push.apply(f,a(o,"b",n,void 0,"j")),f.push("var r=0.0;","for(k=0;k<ad1;++k){","r+=",c(h,"a",i,"i","k"),"*",c(o,"b",n,"k","j"),";"),f.push.apply(f,s(h,"a",i,0,"k")),f.push.apply(f,s(o,"b",n,0,"k")),f.push("}"),t&&f.push("r*=A;"),e&&f.push("r+=B*",c(g,"o",r,"i","j"),";"),f.push.apply(f,u(g,"o",r,"i","j","r")),f.push.apply(f,s(g,"o",r,0,v[1])),f.push("}"),f.push.apply(f,s(g,"o",r,1,v[0])),f.push("}"),f}function f(r,i){var n,t=[],e="r"===r[0]?[1,0]:[0,1];return i&&t.push("if(B!==1.0){"),t.push.apply(t,a(e,"o",r)),e[0]?(t.push("for(i=0;i<od0;++i){for(j=0;j<od1;++j){"),n=["i","j"]):(t.push("for(j=0;j<od1;++j){for(i=0;i<od0;++i){"),n=["j","i"]),i?t.push.apply(t,u(e,"o",r,"i","j","B*"+c(e,"o",r,"i","j"))):t.push.apply(t,u(e,"o",r,"i","j","0")),t.push.apply(t,s(e,"o",r,0,n[1])),t.push("}"),t.push.apply(t,s(e,"o",r,1,n[0])),t.push("}"),i&&t.push("}"),t}function g(r,i,n,t,e){var g=[],h=["od0","od1","ad1"],v=[1,0],y=[1,0],X=[0,1];g.push.apply(g,f(r,e));for(var b=0;b<3;++b)g.push("for(var i",b,"=",h[b],";i",b,">0;){","var w",b,"=",o,";","if(i",b,"<",o,"){","w",b,"=i",b,";","i",b,"=0;","}else{","i",b,"-=",o,";","}");g.push.apply(g,a(v,"o",r,"i0","i1","w1")),g.push("for(i=0;i<w0;++i){for(j=0;j<w1;++j){var r=0.0;"),g.push.apply(g,a(y,"a",i,"(i0+i)","i2")),g.push.apply(g,a(X,"b",n,"i2","(i1+j)")),g.push("for(k=0;k<w2;++k){"),g.push("r+=",c(y,"a",i,"(i0+i)","(i2+k)"),"*",c(X,"b",n,"(i2+k)","(i1+j)"),";"),g.push.apply(g,s(y,"a",i,0,"(i2+k)")),g.push.apply(g,s(X,"b",n,0,"(i2+k)")),g.push("}");var d="r";return t&&(d="A*r"),g.push.apply(g,u(v,"o",r,"(i0+i)","(i1+j)",d+"+"+c(v,"o",r,"(i0+i)","(i1+j)"))),g.push.apply(g,s(v,"o",r,0,"(i1+j)")),g.push("}"),g.push.apply(g,s(v,"o",r,1,"(i0+i)")),g.push("}}}}"),g}function h(r,i,n,a,s){var u=["gemm",r[0],r[1],"a",i[0],i[1],"b",n[0],n[1],a?"alpha":"",s?"beta":""].join(""),c=["function ",u,"(o,a,b,A,B){","var ",t("o",r),t("a",i),t("b",n),"i,j,k;"];"r"===i[0]&&"c"===n[0]?c.push.apply(c,e(r,i,n,a,s)):c.push.apply(c,g(r,i,n,a,s)),c.push("}return ",u);var f=new Function(c.join(""));return f()}i.exports=h;var o=32},{}],17:[function(r,i,n){"use strict";function t(r){if(!r)return c;for(var i=0;i<r.args.length;++i){var n=r.args[i];0===i?r.args[i]={name:n,lvalue:!0,rvalue:!!r.rvalue,count:r.count||1}:r.args[i]={name:n,lvalue:!1,rvalue:!0,count:1}}return r.thisVars||(r.thisVars=[]),r.localVars||(r.localVars=[]),r}function a(r){return u({args:r.args,pre:t(r.pre),body:t(r.body),post:t(r.proc),funcName:r.funcName})}function s(r){for(var i=[],n=0;n<r.args.length;++n)i.push("a"+n);var t=new Function("P",["return function ",r.funcName,"_ndarrayops(",i.join(","),") {P(",i.join(","),");return a0}"].join(""));return t(a(r))}var u=r("cwise-compiler"),c={body:"",args:[],thisVars:[],localVars:[]},e={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var r in e){var i=e[r];n[r]=s({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+i+"c"},funcName:r}),n[r+"eq"]=s({args:["array","array"],body:{args:["a","b"],body:"a"+i+"=b"},rvalue:!0,funcName:r+"eq"}),n[r+"s"]=s({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+i+"s"},funcName:r+"s"}),n[r+"seq"]=s({args:["array","scalar"],body:{args:["a","s"],body:"a"+i+"=s"},rvalue:!0,funcName:r+"seq"})}}();var f={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var r in f){var i=f[r];n[r]=s({args:["array","array"],body:{args:["a","b"],body:"a="+i+"b"},funcName:r}),n[r+"eq"]=s({args:["array"],body:{args:["a"],body:"a="+i+"a"},rvalue:!0,count:2,funcName:r+"eq"})}}();var g={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var r in g){var i=g[r];n[r]=s({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+i+"c"},funcName:r}),n[r+"s"]=s({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+i+"s"},funcName:r+"s"}),n[r+"eq"]=s({args:["array","array"],body:{args:["a","b"],body:"a=a"+i+"b"},rvalue:!0,count:2,funcName:r+"eq"}),n[r+"seq"]=s({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+i+"s"},rvalue:!0,count:2,funcName:r+"seq"})}}();var h=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var r=0;r<h.length;++r){var i=h[r];n[i]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+i,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:i}),n[i+"eq"]=s({args:["array"],pre:{args:[],body:"this_f=Math."+i,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:i+"eq"})}}();var o=["max","min","atan2","pow"];!function(){for(var r=0;r<o.length;++r){var i=o[r];n[i]=s({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+i,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:i}),n[i+"s"]=s({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+i,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:i+"s"}),n[i+"eq"]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+i,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:i+"eq"}),n[i+"seq"]=s({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+i,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:i+"seq"})}}();var v=["atan2","pow"];!function(){for(var r=0;r<v.length;++r){var i=v[r];n[i+"op"]=s({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+i,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:i+"op"}),n[i+"ops"]=s({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+i,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:i+"ops"}),n[i+"opeq"]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+i,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:i+"opeq"}),n[i+"opseq"]=s({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+i,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:i+"opseq"})}}(),n.any=u({args:["array"],pre:c,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),n.all=u({args:["array"],pre:c,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),n.sum=u({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),n.prod=u({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),n.norm2squared=u({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),n.norm2=u({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),n.norminf=u({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),n.norm1=u({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),n.sup=u({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.inf=u({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.argmin=u({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.argmax=u({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.random=s({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),n.assign=s({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),n.assigns=s({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),n.equals=u({args:["array","array"],pre:c,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":5}],18:[function(r,i,n){function t(r,i){return r[0]-i[0]}function a(){var r,i=this.stride,n=new Array(i.length);for(r=0;r<n.length;++r)n[r]=[Math.abs(i[r]),r];n.sort(t);var a=new Array(n.length);for(r=0;r<a.length;++r)a[r]=n[r][1];return a}function s(r,i){var n=["View",i,"d",r].join("");i<0&&(n="View_Nil"+r);var t="generic"===r;if(i===-1){var s="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+r+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",u=new Function(s);return u()}if(0===i){var s="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+r+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(t?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(t?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",u=new Function("TrivialArray",s);return u(h[r][0])}var s=["'use strict'"],c=e(i),f=c.map(function(r){return"i"+r}),g="this.offset+"+c.map(function(r){return"this.stride["+r+"]*i"+r}).join("+"),o=c.map(function(r){return"b"+r}).join(","),v=c.map(function(r){return"c"+r}).join(",");s.push("function "+n+"(a,"+o+","+v+",d){this.data=a","this.shape=["+o+"]","this.stride=["+v+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+r+"'","proto.dimension="+i),s.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+c.map(function(r){return"this.shape["+r+"]"}).join("*"),"}})"),1===i?s.push("proto.order=[0]"):(s.push("Object.defineProperty(proto,'order',{get:"),i<4?(s.push("function "+n+"_order(){"),2===i?s.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===i&&s.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):s.push("ORDER})")),s.push("proto.set=function "+n+"_set("+f.join(",")+",v){"),t?s.push("return this.data.set("+g+",v)}"):s.push("return this.data["+g+"]=v}"),s.push("proto.get=function "+n+"_get("+f.join(",")+"){"),t?s.push("return this.data.get("+g+")}"):s.push("return this.data["+g+"]}"),s.push("proto.index=function "+n+"_index(",f.join(),"){return "+g+"}"),s.push("proto.hi=function "+n+"_hi("+f.join(",")+"){return new "+n+"(this.data,"+c.map(function(r){return["(typeof i",r,"!=='number'||i",r,"<0)?this.shape[",r,"]:i",r,"|0"].join("")}).join(",")+","+c.map(function(r){return"this.stride["+r+"]"}).join(",")+",this.offset)}");var y=c.map(function(r){return"a"+r+"=this.shape["+r+"]"}),X=c.map(function(r){return"c"+r+"=this.stride["+r+"]"});s.push("proto.lo=function "+n+"_lo("+f.join(",")+"){var b=this.offset,d=0,"+y.join(",")+","+X.join(","));for(var b=0;b<i;++b)s.push("if(typeof i"+b+"==='number'&&i"+b+">=0){d=i"+b+"|0;b+=c"+b+"*d;a"+b+"-=d}");s.push("return new "+n+"(this.data,"+c.map(function(r){return"a"+r}).join(",")+","+c.map(function(r){return"c"+r}).join(",")+",b)}"),s.push("proto.step=function "+n+"_step("+f.join(",")+"){var "+c.map(function(r){return"a"+r+"=this.shape["+r+"]"}).join(",")+","+c.map(function(r){return"b"+r+"=this.stride["+r+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var b=0;b<i;++b)s.push("if(typeof i"+b+"==='number'){d=i"+b+"|0;if(d<0){c+=b"+b+"*(a"+b+"-1);a"+b+"=ceil(-a"+b+"/d)}else{a"+b+"=ceil(a"+b+"/d)}b"+b+"*=d}");s.push("return new "+n+"(this.data,"+c.map(function(r){return"a"+r}).join(",")+","+c.map(function(r){return"b"+r}).join(",")+",c)}");for(var d=new Array(i),j=new Array(i),b=0;b<i;++b)d[b]="a[i"+b+"]",j[b]="b[i"+b+"]";s.push("proto.transpose=function "+n+"_transpose("+f+"){"+f.map(function(r,i){return r+"=("+r+"===undefined?"+i+":"+r+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+d.join(",")+","+j.join(",")+",this.offset)}"),s.push("proto.pick=function "+n+"_pick("+f+"){var a=[],b=[],c=this.offset");for(var b=0;b<i;++b)s.push("if(typeof i"+b+"==='number'&&i"+b+">=0){c=(c+this.stride["+b+"]*i"+b+")|0}else{a.push(this.shape["+b+"]);b.push(this.stride["+b+"])}");s.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),s.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+c.map(function(r){return"shape["+r+"]"}).join(",")+","+c.map(function(r){return"stride["+r+"]"}).join(",")+",offset)}");var u=new Function("CTOR_LIST","ORDER",s.join("\n"));return u(h[r],a)}function u(r){if(f(r))return"buffer";if(g)switch(Object.prototype.toString.call(r)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(r)?"array":"generic"}function c(r,i,n,t){if(void 0===r){var a=h.array[0];return a([])}"number"==typeof r&&(r=[r]),void 0===i&&(i=[r.length]);var c=i.length;if(void 0===n){n=new Array(c);for(var e=c-1,f=1;e>=0;--e)n[e]=f,f*=i[e]}if(void 0===t){t=0;for(var e=0;e<c;++e)n[e]<0&&(t-=(i[e]-1)*n[e])}for(var g=u(r),o=h[g];o.length<=c+1;)o.push(s(g,o.length-1));var a=o[c+1];return a(r,i,n,t)}var e=r("iota-array"),f=r("is-buffer"),g="undefined"!=typeof Float64Array,h={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};i.exports=c},{"iota-array":11,"is-buffer":12}],19:[function(r,i,n){(function(r){function i(r,i){for(var n=0,t=r.length-1;t>=0;t--){var a=r[t];"."===a?r.splice(t,1):".."===a?(r.splice(t,1),n++):n&&(r.splice(t,1),n--)}if(i)for(;n--;n)r.unshift("..");return r}function t(r,i){if(r.filter)return r.filter(i);for(var n=[],t=0;t<r.length;t++)i(r[t],t,r)&&n.push(r[t]);return n}var a=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(r){return a.exec(r).slice(1)};n.resolve=function(){for(var n="",a=!1,s=arguments.length-1;s>=-1&&!a;s--){var u=s>=0?arguments[s]:r.cwd();if("string"!=typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(n=u+"/"+n,a="/"===u.charAt(0))}return n=i(t(n.split("/"),function(r){return!!r}),!a).join("/"),(a?"/":"")+n||"."},n.normalize=function(r){var a=n.isAbsolute(r),s="/"===u(r,-1);return r=i(t(r.split("/"),function(r){return!!r}),!a).join("/"),r||a||(r="."),r&&s&&(r+="/"),(a?"/":"")+r},n.isAbsolute=function(r){return"/"===r.charAt(0)},n.join=function(){var r=Array.prototype.slice.call(arguments,0);return n.normalize(t(r,function(r,i){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))},n.relative=function(r,i){function t(r){for(var i=0;i<r.length&&""===r[i];i++);for(var n=r.length-1;n>=0&&""===r[n];n--);return i>n?[]:r.slice(i,n-i+1)}r=n.resolve(r).substr(1),i=n.resolve(i).substr(1);for(var a=t(r.split("/")),s=t(i.split("/")),u=Math.min(a.length,s.length),c=u,e=0;e<u;e++)if(a[e]!==s[e]){c=e;break}for(var f=[],e=c;e<a.length;e++)f.push("..");return f=f.concat(s.slice(c)),f.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(r){var i=s(r),n=i[0],t=i[1];return n||t?(t&&(t=t.substr(0,t.length-1)),n+t):"."},n.basename=function(r,i){var n=s(r)[2];return i&&n.substr(-1*i.length)===i&&(n=n.substr(0,n.length-i.length)),n},n.extname=function(r){return s(r)[3]};var u="b"==="ab".substr(-1)?function(r,i,n){return r.substr(i,n)}:function(r,i,n){return i<0&&(i=r.length+i),r.substr(i,n)}}).call(this,r("_process"))},{_process:20}],20:[function(r,i,n){function t(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(r){if(h===setTimeout)return setTimeout(r,0);if((h===t||!h)&&setTimeout)return h=setTimeout,setTimeout(r,0);try{return h(r,0)}catch(i){try{return h.call(null,r,0)}catch(i){return h.call(this,r,0)}}}function u(r){if(o===clearTimeout)return clearTimeout(r);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(r);try{return o(r)}catch(i){try{return o.call(null,r)}catch(i){return o.call(this,r)}}}function c(){b&&y&&(b=!1,y.length?X=y.concat(X):d=-1,X.length&&e())}function e(){if(!b){var r=s(c);b=!0;for(var i=X.length;i;){for(y=X,X=[];++d<i;)y&&y[d].run();d=-1,i=X.length}y=null,b=!1,u(r)}}function f(r,i){this.fun=r,this.array=i}function g(){}var h,o,v=i.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:t}catch(r){h=t}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(r){o=a}}();var y,X=[],b=!1,d=-1;v.nextTick=function(r){var i=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)i[n-1]=arguments[n];X.push(new f(r,i)),1!==X.length||b||s(e)},f.prototype.run=function(){this.fun.apply(null,this.array)},v.title="browser",v.browser=!0,v.env={},v.argv=[],v.version="",v.versions={},v.on=g,v.addListener=g,v.once=g,v.off=g,v.removeListener=g,v.removeAllListeners=g,v.emit=g,v.binding=function(r){throw new Error("process.binding is not supported")},v.cwd=function(){return"/"},v.chdir=function(r){throw new Error("process.chdir is not supported")},v.umask=function(){return 0}},{}],21:[function(r,i,n){(function(i,t){"use strict";function a(r){if(r){var i=r.length||r.byteLength,n=j.log2(i);p[n].push(r)}}function s(r){a(r.buffer)}function u(r){var r=j.nextPow2(r),i=j.log2(r),n=p[i];return n.length>0?n.pop():new ArrayBuffer(r)}function c(r){return new Uint8Array(u(r),0,r)}function e(r){return new Uint16Array(u(2*r),0,r)}function f(r){return new Uint32Array(u(4*r),0,r)}function g(r){return new Int8Array(u(r),0,r)}function h(r){return new Int16Array(u(2*r),0,r)}function o(r){return new Int32Array(u(4*r),0,r)}function v(r){return new Float32Array(u(4*r),0,r)}function y(r){return new Float64Array(u(8*r),0,r)}function X(r){return l?new Uint8ClampedArray(u(r),0,r):c(r)}function b(r){return new DataView(u(r),0,r)}function d(r){r=j.nextPow2(r);var i=j.log2(r),n=q[i];return n.length>0?n.pop():new t(r)}var j=r("bit-twiddle"),k=r("dup");i.__TYPEDARRAY_POOL||(i.__TYPEDARRAY_POOL={UINT8:k([32,0]),UINT16:k([32,0]),UINT32:k([32,0]),INT8:k([32,0]),INT16:k([32,0]),INT32:k([32,0]),FLOAT:k([32,0]),DOUBLE:k([32,0]),DATA:k([32,0]),UINT8C:k([32,0]),BUFFER:k([32,0])});var l="undefined"!=typeof Uint8ClampedArray,m=i.__TYPEDARRAY_POOL;m.UINT8C||(m.UINT8C=k([32,0])),m.BUFFER||(m.BUFFER=k([32,0]));var p=m.DATA,q=m.BUFFER;n.free=function(r){if(t.isBuffer(r))q[j.log2(r.length)].push(r);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(r)&&(r=r.buffer),!r)return;var i=r.length||r.byteLength,n=0|j.log2(i);p[n].push(r)}},n.freeUint8=n.freeUint16=n.freeUint32=n.freeInt8=n.freeInt16=n.freeInt32=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=s,n.freeArrayBuffer=a,n.freeBuffer=function(r){q[j.log2(r.length)].push(r)},n.malloc=function(r,i){if(void 0===i||"arraybuffer"===i)return u(r);switch(i){case"uint8":return c(r);case"uint16":return e(r);case"uint32":return f(r);case"int8":return g(r);case"int16":return h(r);case"int32":return o(r);case"float":case"float32":return v(r);case"double":case"float64":return y(r);case"uint8_clamped":return X(r);case"buffer":return d(r);case"data":case"dataview":return b(r);default:return null}return null},n.mallocArrayBuffer=u,n.mallocUint8=c,n.mallocUint16=e,n.mallocUint32=f,n.mallocInt8=g,n.mallocInt16=h,n.mallocInt32=o,n.mallocFloat32=n.mallocFloat=v,n.mallocFloat64=n.mallocDouble=y,n.mallocUint8Clamped=X,
n.mallocDataView=b,n.mallocBuffer=d,n.clearCache=function(){for(var r=0;r<32;++r)m.UINT8[r].length=0,m.UINT16[r].length=0,m.UINT32[r].length=0,m.INT8[r].length=0,m.INT16[r].length=0,m.INT32[r].length=0,m.FLOAT[r].length=0,m.DOUBLE[r].length=0,m.UINT8C[r].length=0,p[r].length=0,q[r].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},r("buffer").Buffer)},{"bit-twiddle":2,buffer:3,dup:9}],22:[function(r,i,n){"use strict";function t(r,i){for(var n=1,t=r.length,a=r[0],s=r[0],u=1;u<t;++u)if(s=a,a=r[u],i(a,s)){if(u===n){n++;continue}r[n++]=a}return r.length=n,r}function a(r){for(var i=1,n=r.length,t=r[0],a=r[0],s=1;s<n;++s,a=t)if(a=t,t=r[s],t!==a){if(s===i){i++;continue}r[i++]=t}return r.length=i,r}function s(r,i,n){return 0===r.length?r:i?(n||r.sort(i),t(r,i)):(n||r.sort(),a(r))}i.exports=s},{}],23:[function(r,i,n){"use strict";i.exports={printThreshold:7,nFloatingValues:5}},{}],24:[function(r,i,n){"use strict";i.exports={int8:Int8Array,int16:Int16Array,int32:Int32Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,float32:Float32Array,float64:Float64Array,array:Array}},{}],25:[function(r,i,n){"use strict";i.exports={ValueError:function(){var r=Error.apply(this,arguments);return r.name=this.constructor.name,r},ConfigError:function(){var r=Error.apply(this,arguments);return r.name=this.constructor.name,r},NotImplementedError:function(){var r=Error.apply(this,arguments);return r.name=this.constructor.name,r}}},{}],26:[function(r,i,n){"use strict";i.exports=function(r,i,n,t,a){var s=i-1,u=i+t-1,c=r-1,e=r+n-1;return 0!==i&&0!==r?a.selection.get(c,s)-a.selection.get(e,s)-a.selection.get(c,u)+a.selection.get(e,u):0===i&&0===r?a.selection.get(r+n-1,i+t-1):0===i?-a.selection.get(c,i+t-1)+a.selection.get(r+n-1,i+t-1):-a.selection.get(e,s)+a.selection.get(e,u)}},{}],27:[function(r,i,n){"use strict";var t=r("./area-sum");i.exports=function(r,i,n,a,s){return t(r,i,n,a,s)/(n*a)}},{"./area-sum":26}],28:[function(r,i,n){(function(n){"use strict";function t(r){return s(a.join(u,r))}var a=r("path"),s=r("./read"),u=a.join(a.resolve(n),"../../data"),c={};Object.defineProperty(c,"digit",{get:function(){return t("five.png")}}),Object.defineProperty(c,"five",{get:function(){return t("five.png")}}),Object.defineProperty(c,"node",{get:function(){return t("nodejs.png")}}),Object.defineProperty(c,"lena",{get:function(){return t("lenna.png")}}),Object.defineProperty(c,"lenna",{get:function(){return t("lenna.png")}}),Object.defineProperty(c,"moon",{get:function(){return t("moon.jpg")}}),i.exports=c}).call(this,"/src/images")},{"./read":32,path:19}],29:[function(r,i,n){"use strict";var t=r("../ndarray");i.exports=function(r){return new t(r.selection.step(null,-1))}},{"../ndarray":42}],30:[function(r,i,n){"use strict";i.exports={data:r("./data"),read:r("./read"),save:r("./save"),resize:r("./resize"),sat:r("./sat"),ssat:r("./ssat"),sobel:r("./sobel"),scharr:r("./scharr"),areaSum:r("./area-sum"),areaValue:r("./area-value"),rgb2gray:r("./rgb2gray"),flip:r("./flip")}},{"./area-sum":26,"./area-value":27,"./data":28,"./flip":29,"./read":32,"./resize":33,"./rgb2gray":34,"./sat":35,"./save":36,"./scharr":37,"./sobel":38,"./ssat":39}],31:[function(r,i,n){"use strict";var t=r("../ndarray"),a=r("cwise/lib/wrapper")({args:["array","array","array"],pre:{body:"{this_isgray=!0}",args:[],thisVars:["this_isgray"],localVars:[]},body:{body:"{_inline_82_arg0_===_inline_82_arg1_&&_inline_82_arg1_===_inline_82_arg2_||(this_isgray=!1)}",args:[{name:"_inline_82_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_82_arg1_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_82_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_isgray"],localVars:[]},post:{body:"{return this_isgray}",args:[],thisVars:["this_isgray"],localVars:[]},debug:!1,funcName:"doCheckIsGrayscaleCwise",blockSize:64});i.exports=function(r){r instanceof t&&(r=r.selection);var i=r.shape;return 1!==i.length&&(2===i.length||3===i.length&&1===i[2]||3===i.length&&(3===i[2]||4===i[2])&&a(r.pick(null,null,0),r.pick(null,null,1),r.pick(null,null,2)))}},{"../ndarray":42,"cwise/lib/wrapper":8}],32:[function(r,i,n){"use strict";function t(r){var i=r.getContext("2d"),n=i.getImageData(0,0,r.width,r.height),t=[r.width,r.height,4],a=[4,4*r.width,1],c=s(new Uint8Array(n.data),t,a,0),f=c.transpose(1,0);return e(f)&&(f=f.pick(null,null,0)),new u(f)}function a(r){var i=document.createElement("canvas");i.width=r.width,i.height=r.height;var n=i.getContext("2d");n.drawImage(r,0,0);var t=n.getImageData(0,0,r.width,r.height),a=[r.width,r.height,4],c=[4,4*r.width,1],f=s(new Uint8Array(t.data),a,c,0),g=f.transpose(1,0);return e(g)&&(g=g.pick(null,null,0)),new u(g)}var s=r("ndarray"),u=r("../ndarray"),c=r("../errors"),e=r("./is-grayscale");i.exports=function(r){if(r instanceof HTMLCanvasElement)return t(r);if(r instanceof HTMLImageElement)return a(r);throw new c.ValueError("expect input to be either an HTML Canvas or a (loaded) Image")}},{"../errors":25,"../ndarray":42,"./is-grayscale":31,ndarray:18}],33:[function(r,i,n){"use strict";var t=r("./utils"),a=r("ndarray"),s=r("../ndarray");i.exports=function(r,i,n){var u=r.shape,c=u[0],e=u[1],f=u[2]||1,g=document.createElement("canvas");g.height=c,g.width=e;var h=g.getContext("2d"),o=h.createImageData(e,c),v=t.setRawData(r.selection,o.data);if(v)throw v;var y=c/i,X=e/n,b=Math.min(y,X),d=i*b,j=n*b,k=(c-b*i)/2,l=(e-b*n)/2;h.putImageData(o,0,0),h.drawImage(g,l,k,j,d,0,0,n,i);var m=h.getImageData(0,0,n,i),p=[0|n,0|i,4],q=[4,4*n|0,1],w=a(new Uint8Array(m.data),p,q,0),x=w.transpose(1,0);return 2===u.length?x=x.pick(null,null,0):3===u.length&&1===f&&(x=x.pick(null,null,0)),new s(x)}},{"../ndarray":42,"./utils":40,ndarray:18}],34:[function(r,i,n){"use strict";var t=r("../ndarray"),a=r("../utils"),s=r("cwise/lib/wrapper")({args:["array","array","array","array"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_79_arg0_=4899*_inline_79_arg1_+9617*_inline_79_arg2_+1868*_inline_79_arg3_+8192>>14}",args:[{name:"_inline_79_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_79_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_79_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_79_arg3_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"rgb2grayCwise",blockSize:64});i.exports=function(r){r instanceof t||(r=new t(r));var i=r.shape,n=i[0],u=i[1],c=i[2]||1;if(1===c)return r;var e=[n,u],f=new t(new Uint8Array(a.shapeSize(e)),e),g=r.selection.pick(null,null,0),h=r.selection.pick(null,null,1),o=r.selection.pick(null,null,2);return s(f.selection,g,h,o),f}},{"../ndarray":42,"../utils":43,"cwise/lib/wrapper":8}],35:[function(r,i,n){"use strict";var t=r("../ndarray"),a=r("./rgb2gray"),s=r("cwise/lib/wrapper")({args:["array","array","index",{offset:[-1,-1],array:0},{offset:[-1,0],array:0},{offset:[0,-1],array:0}],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_67_arg0_=0!==_inline_67_arg2_[0]&&0!==_inline_67_arg2_[1]?_inline_67_arg1_+_inline_67_arg4_+_inline_67_arg5_-_inline_67_arg3_:0===_inline_67_arg2_[0]&&0===_inline_67_arg2_[1]?_inline_67_arg1_:0===_inline_67_arg2_[0]?_inline_67_arg1_+_inline_67_arg5_:_inline_67_arg1_+_inline_67_arg4_}",args:[{name:"_inline_67_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_67_arg1_",lvalue:!1,rvalue:!0,count:4},{name:"_inline_67_arg2_",lvalue:!1,rvalue:!0,count:5},{name:"_inline_67_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_67_arg4_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_67_arg5_",lvalue:!1,rvalue:!0,count:2}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"doIntegrateBody",blockSize:64});i.exports=function(r){var i=a(r),n=i.shape,u=n[0],c=n[1],e=new t(new Uint32Array(u*c),[u,c]);return s(e.selection,i.selection),e}},{"../ndarray":42,"./rgb2gray":34,"cwise/lib/wrapper":8}],36:[function(r,i,n){"use strict";var t=r("./utils"),a=r("../errors");i.exports=function(r,i){var n=r.shape,s=n[0],u=n[1];if(!(i instanceof HTMLCanvasElement))throw new a.ValueError("expect input to be either an HTML Canvas or a (loaded) Image");var c=document.createElement("canvas");c.height=s,c.width=u;var e=c.getContext("2d"),f=e.createImageData(u,s),g=t.setRawData(r.selection,f.data);if(g)throw g;e.putImageData(f,0,0),e.drawImage(c,u,s),i.getContext("2d").drawImage(c,0,0,u,s,0,0,i.width,i.height)}},{"../errors":25,"./utils":40}],37:[function(r,i,n){"use strict";var t=r("ndarray-ops"),a=r("../ndarray"),s=r("../utils"),u=r("./rgb2gray"),c=r("cwise/lib/wrapper")({args:["array","array",{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1}],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_76_q=3*_inline_76_arg2_+10*_inline_76_arg3_+3*_inline_76_arg4_-3*_inline_76_arg7_-10*_inline_76_arg8_-3*_inline_76_arg9_,_inline_76_s=3*_inline_76_arg2_-3*_inline_76_arg4_+10*_inline_76_arg5_-10*_inline_76_arg6_+3*_inline_76_arg7_-3*_inline_76_arg9_;_inline_76_arg0_=Math.sqrt(_inline_76_s*_inline_76_s+_inline_76_q*_inline_76_q)}",args:[{name:"_inline_76_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_76_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_76_arg2_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_76_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_76_arg4_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_76_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_76_arg6_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_76_arg7_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_76_arg8_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_76_arg9_",lvalue:!1,rvalue:!0,count:2}],thisVars:[],localVars:["_inline_76_q","_inline_76_s"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"doSobelBody",blockSize:64});i.exports=function(r){var i=u(r),n=i.shape,e=n[0],f=n[1],g=new a(new Float32Array(s.shapeSize(n)),n);return c(g.selection,i.selection),t.assigns(g.selection.pick(0,null),0),t.assigns(g.selection.pick(null,0),0),t.assigns(g.selection.pick(e-1,null),0),t.assigns(g.selection.pick(null,f-1),0),g.divide(16*Math.sqrt(2),!1)}},{"../ndarray":42,"../utils":43,"./rgb2gray":34,"cwise/lib/wrapper":8,"ndarray-ops":17}],38:[function(r,i,n){"use strict";var t=r("ndarray-ops"),a=r("../ndarray"),s=r("../utils"),u=r("./rgb2gray"),c=r("cwise/lib/wrapper")({args:["array","array",{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1}],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_73_q=_inline_73_arg2_+2*_inline_73_arg3_+_inline_73_arg4_-_inline_73_arg7_-2*_inline_73_arg8_-_inline_73_arg9_,_inline_73_s=_inline_73_arg2_-_inline_73_arg4_+2*_inline_73_arg5_-2*_inline_73_arg6_+_inline_73_arg7_-_inline_73_arg9_;_inline_73_arg0_=Math.sqrt(_inline_73_s*_inline_73_s+_inline_73_q*_inline_73_q)}",args:[{name:"_inline_73_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_73_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_73_arg2_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_73_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_73_arg4_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_73_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_73_arg6_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_73_arg7_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_73_arg8_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_73_arg9_",lvalue:!1,rvalue:!0,count:2}],thisVars:[],localVars:["_inline_73_q","_inline_73_s"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"doSobelBody",blockSize:64});i.exports=function(r){var i=u(r),n=i.shape,e=n[0],f=n[1],g=new a(new Float32Array(s.shapeSize(n)),n);return c(g.selection,i.selection),t.assigns(g.selection.pick(0,null),0),t.assigns(g.selection.pick(null,0),0),t.assigns(g.selection.pick(e-1,null),0),t.assigns(g.selection.pick(null,f-1),0),g.divide(4*Math.sqrt(2),!1)}},{"../ndarray":42,"../utils":43,"./rgb2gray":34,"cwise/lib/wrapper":8,"ndarray-ops":17}],39:[function(r,i,n){"use strict";var t=r("../ndarray"),a=r("./rgb2gray"),s=r("cwise/lib/wrapper")({args:["array","array","index",{offset:[-1,-1],array:0},{offset:[-1,0],array:0},{offset:[0,-1],array:0}],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_70_arg0_=0!==_inline_70_arg2_[0]&&0!==_inline_70_arg2_[1]?_inline_70_arg1_*_inline_70_arg1_+_inline_70_arg4_+_inline_70_arg5_-_inline_70_arg3_:0===_inline_70_arg2_[0]&&0===_inline_70_arg2_[1]?_inline_70_arg1_*_inline_70_arg1_:0===_inline_70_arg2_[0]?_inline_70_arg1_*_inline_70_arg1_+_inline_70_arg5_:_inline_70_arg1_*_inline_70_arg1_+_inline_70_arg4_}",args:[{name:"_inline_70_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_70_arg1_",lvalue:!1,rvalue:!0,count:8},{name:"_inline_70_arg2_",lvalue:!1,rvalue:!0,count:5},{name:"_inline_70_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_70_arg4_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_70_arg5_",lvalue:!1,rvalue:!0,count:2}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"doIntegrateBody",blockSize:64});i.exports=function(r){var i=a(r),n=i.shape,u=n[0],c=n[1],e=new t(new Uint32Array(u*c),[u,c]);return s(e.selection,i.selection),e}},{"../ndarray":42,"./rgb2gray":34,"cwise/lib/wrapper":8}],40:[function(r,i,n){"use strict";var t=r("../ndarray");i.exports.getRawData=function(r){r instanceof t&&(r=r.selection);var i,n,a=0,s=r.shape,u=s[0],c=s[1],e=s[2]||1,f=new Uint8Array(u*c*e);if(3===r.shape.length)if(3===e)for(i=0;i<u;++i)for(n=0;n<c;++n)f[a++]=r.get(i,n,0),f[a++]=r.get(i,n,1),f[a++]=r.get(i,n,2);else if(4===e)for(i=0;i<u;++i)for(n=0;n<c;++n)f[a++]=r.get(i,n,0),f[a++]=r.get(i,n,1),f[a++]=r.get(i,n,2),f[a++]=r.get(i,n,3);else{if(1!==e)return new Error("Incompatible array shape");for(i=0;i<u;++i)for(n=0;n<c;++n)f[a++]=r.get(i,n,0)}else{if(2!==r.shape.length)return new Error("Invalid image");for(i=0;i<u;++i)for(n=0;n<c;++n)f[a++]=r.get(i,n)}return f},i.exports.setRawData=function(r,i){var n,t,a,s=0,u=r.shape[0],c=r.shape[1],e=r.shape[2]||1;if(3===r.shape.length)if(3===e)for(n=0;n<u;++n)for(t=0;t<c;++t)i[s++]=r.get(n,t,0),i[s++]=r.get(n,t,1),i[s++]=r.get(n,t,2),i[s++]=255;else if(4===e)for(n=0;n<u;++n)for(t=0;t<c;++t)i[s++]=r.get(n,t,0),i[s++]=r.get(n,t,1),i[s++]=r.get(n,t,2),i[s++]=r.get(n,t,3);else{if(1!==e)return new Error("Incompatible array shape");for(n=0;n<u;++n)for(t=0;t<c;++t)a=r.get(n,t,0),i[s++]=a,i[s++]=a,i[s++]=a,i[s++]=255}else{if(2!==r.shape.length)return new Error("Invalid image");for(n=0;n<u;++n)for(t=0;t<c;++t)a=r.get(n,t),i[s++]=a,i[s++]=a,i[s++]=a,i[s++]=255}}},{"../ndarray":42}],41:[function(r,i,n){"use strict";function t(r,i){if(0!==r.length&&0!==i.length){for(var n=r.slice().reverse(),t=i.slice().reverse(),a=Math.max(r.length,i.length),s=new Array(a),u=0;u<a;u++)if(n[u]&&1!==n[u])if(t[u]&&1!==t[u]){if(n[u]!==t[u])return;s[u]=n[u]}else s[u]=n[u];else s[u]=t[u];return s.reverse()}}function a(r,i){return Y.new(r).add(i)}function s(r,i){return Y.new(r).multiply(i)}function u(r,i){return Y.new(r).divide(i)}function c(r,i){return Y.new(r).subtract(i)}function e(r,i){return Y.new(r).equal(i)}function f(r){return Y.new(r).flatten()}function g(r,i){return Y.new(r).reshape(i)}function h(r){return Y.new(r).exp()}function o(r){return Y.new(r).sqrt()}function v(r,i){return Y.new(r).pow(i)}function y(r){return Y.new(r).sum()}function X(r){return Y.new(r).mean()}function b(r){return Y.new(r).std()}function d(r){return Y.new(r).min()}function j(r){return Y.new(r).max()}function k(r,i){return Y.new(r).transpose(i)}function l(r){return Y.new(r).negative()}function m(r,i,n,t){if(1===arguments.length)return m(0,r,1,void 0);if(2===arguments.length&&Z.isNumber(i))return m(r,i,1,void 0);if(2===arguments.length)return m(0,r,1,i);if(3===arguments.length&&!Z.isNumber(n))return m(r,i,1,n);for(var a=[],s=0;r<i;)a[s++]=r,r+=n;return Y.new(a,t)}function p(r,i){Z.isNumber(r)&&r>=0&&(r=[r]);var n=Z.shapeSize(r),t=Z.getType(i),a=new Y(new t(n),r);return"array"===a.dtype&&T.assigns(a.selection,0),a}function q(r,i){Z.isNumber(r)&&r>=0&&(r=[r]);var n=Z.shapeSize(r),t=Z.getType(i),a=new Y(new t(n),r);return T.assigns(a.selection,1),a}function w(r,i){Z.isNumber(r)&&r>=0&&(r=[r]);var n=Z.shapeSize(r),t=Z.getType(i);return new Y(new t(n),r)}function x(r){if(0===arguments.length)return Y.new(Math.random());r=1===arguments.length?Z.isNumber(r)?[0|r]:r:[].slice.call(arguments);var i=Z.shapeSize(r),n=new Y(new Float64Array(i),r);return T.random(n.selection),n}function z(r){var i=Y.new(r).exp(),n=i.sum();return T.divseq(i.selection,n),i}function A(r,i){return r=Y.new(r).clone(),i=i||1,_(r.selection,i),r}function B(r,i,n){1===arguments.length?(i=0,n=1):2===arguments.length&&(n=1);var t=r instanceof Y?r.clone():Y.new(r);return rr(t.selection,i,n),t}function C(r,i){i=i||.001;var n=r instanceof Y?r.clone():Y.new(r);return ir(n.selection,i),n}function D(r){var i=r instanceof Y?r.clone():Y.new(r);return nr(i.selection),i}function E(r){var i=r instanceof Y?r.clone():Y.new(r);return T.abseq(i.selection),i}function F(r){var i=r instanceof Y?r.clone():Y.new(r);return T.coseq(i.selection),i}function G(r){var i=r instanceof Y?r.clone():Y.new(r);return T.acoseq(i.selection),i}function H(r){var i=r instanceof Y?r.clone():Y.new(r);return T.sineq(i.selection),i}function I(r){var i=r instanceof Y?r.clone():Y.new(r);return T.asineq(i.selection),i}function J(r){var i=r instanceof Y?r.clone():Y.new(r);return T.taneq(i.selection),i}function K(r){var i=r instanceof Y?r.clone():Y.new(r);return T.ataneq(i.selection),i}function L(r,i){return Y.new(r).dot(i)}function M(r){arguments.length>1&&(r=[].slice.call(arguments));var i,n;for(i=0;i<r.length;i++)n=r[i],r[i]=n instanceof Y?n.tolist():Z.isNumber(n)?[n]:n;var t=r[0];for(i=1;i<r.length;i++){n=r[i];var a=Z.getShape(t),s=Z.getShape(n);if(a.length!==s.length)throw new $.ValueError("all the input arrays must have same number of dimensions");if(1===a.length&&1===s.length)t=t.concat(n);else if(2===a.length&&2===s.length&&a[0]===s[0]||1===a.length&&2===s.length&&a[0]===s[0]||2===a.length&&1===s.length&&a[0]===s[0])for(var u=0;u<a[0];u++)t[u]=t[u].concat(n[u]);else{if(!(3===a.length&&3===s.length&&a[0]===s[0]&&a[1]===s[1]||2===a.length&&3===s.length&&a[0]===s[0]&&a[1]===s[1]||3===a.length&&2===s.length&&a[0]===s[0]&&a[1]===s[1]))throw new $.ValueError('cannot concatenate  "'+a+'" with "'+s+'"');for(var c=0;c<a[0];c++){for(var e=new Array(a[1]),f=0;f<a[1];f++)e[f]=t[c][f].concat(n[c][f]);t[c]=e}}}return Y.new(t,r[0].dtype)}function N(r){return Y.new(r).round()}function O(r,i){return Y.new(r).convolve(i)}function P(r,i){return Y.new(r).fftconvolve(i)}function Q(r){r=r instanceof Y?r.clone():Y.new(r);var i=r.shape,n=i.length;if(2!==i[n-1])throw new $.ValueError("expect last dimension of the array to have 2 values (for both real and imaginary part)");var t=new Array(n),a=new Array(n);return t[n-1]=0,a[n-1]=1,U(1,r.selection.pick.apply(r.selection,t),r.selection.pick.apply(r.selection,a)),r}function R(r){r=r instanceof Y?r.clone():Y.new(r);var i=r.shape,n=i.length;if(2!==i[n-1])throw new $.ValueError("expect last dimension of the array to have 2 values (for both real and imaginary part)");var t=new Array(n),a=new Array(n);return t[n-1]=0,a[n-1]=1,U(-1,r.selection.pick.apply(r.selection,t),r.selection.pick.apply(r.selection,a)),r}var S=r("ndarray"),T=r("ndarray-ops"),U=r("ndarray-fft"),V=r("./config"),W=r("./dtypes"),Y=r("./ndarray"),Z=r("./utils"),$=r("./errors"),_=r("cwise/lib/wrapper")({args:["array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_43_arg0_=_inline_43_arg0_<-30?0:_inline_43_arg0_>30?1:1/(1+Math.exp(-1*_inline_43_arg1_*_inline_43_arg0_))}",args:[{name:"_inline_43_arg0_",lvalue:!0,rvalue:!0,count:4},{name:"_inline_43_arg1_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"sigmoidCwise",blockSize:64}),rr=r("cwise/lib/wrapper")({args:["array","scalar","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_46_arg0_=Math.min(Math.max(_inline_46_arg1_,_inline_46_arg0_),_inline_46_arg2_)}",args:[{name:"_inline_46_arg0_",lvalue:!0,rvalue:!0,count:2},{name:"_inline_46_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"clipCwise",blockSize:64}),ir=r("cwise/lib/wrapper")({args:["array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_49_arg0_=Math.max(_inline_49_arg1_*_inline_49_arg0_,_inline_49_arg0_)}",args:[{name:"_inline_49_arg0_",lvalue:!0,rvalue:!0,count:3},{name:"_inline_49_arg1_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"leakyReluCwise",blockSize:64}),nr=r("cwise/lib/wrapper")({args:["array"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_52_arg0_=(Math.exp(2*_inline_52_arg0_)-1)/(Math.exp(2*_inline_52_arg0_)+1)}",args:[{name:"_inline_52_arg0_",lvalue:!0,rvalue:!0,count:3}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"tanhCwise",blockSize:64});i.exports={config:V,dtypes:W,NdArray:Y,ndarray:S,array:Y.new,arange:m,reshape:g,zeros:p,ones:q,empty:w,flatten:f,random:x,softmax:z,sigmoid:A,leakyRelu:C,abs:E,arccos:G,arcsin:I,arctan:K,cos:F,sin:H,tan:J,tanh:D,clip:B,exp:h,sqrt:o,power:v,sum:y,mean:X,std:b,dot:L,add:a,subtract:c,multiply:s,divide:u,negative:l,equal:e,max:j,min:d,concatenate:M,transpose:k,errors:$,broadcast:t,round:N,convolve:O,fftconvolve:P,fft:Q,ifft:R,int8:function(r){return Y.new(r,"int8")},uint8:function(r){return Y.new(r,"uint8")},int16:function(r){return Y.new(r,"int16")},uint16:function(r){return Y.new(r,"uint16")},int32:function(r){return Y.new(r,"int32")},uint32:function(r){return Y.new(r,"uint32")},float32:function(r){return Y.new(r,"float32")},float64:function(r){return Y.new(r,"float64")},images:r("./images")}},{"./config":23,"./dtypes":24,"./errors":25,"./images":30,"./ndarray":42,"./utils":43,"cwise/lib/wrapper":8,ndarray:18,"ndarray-fft":13,"ndarray-ops":17}],42:[function(r,i,n){"use strict";function t(r,i){if(r instanceof X)return r;var n=y.getType(i);if(y.isNumber(r))return n!==Array?new X(new n([r]),[1]):new X([r],[1]);var t=y.getShape(r);return t.length>1&&(r=y.flatten(r,!0)),r instanceof n||(r=new n(r)),new X(r,t)}function a(r,i){i=i||0;var n=0|r[i];if(n<=0)return[];var t,s=new Array(n);if(i===r.length-1)for(t=0;t<n;++t)s[t]=0;else for(t=0;t<n;++t)s[t]=a(r,i+1);return s}function s(r){var i=a(r.shape,0);return k(r,i),i}function u(r){return String(Number((r||0).toFixed(o.nFloatingValues)))}var c=r("ndarray"),e=r("ndarray-ops"),f=r("ndarray-gemm"),g=r("ndarray-fft"),h=r("typedarray-pool"),o=r("./config"),v=r("./errors"),y=r("./utils"),X=function(){if(1===arguments.length)this.selection=arguments[0];else{if(0===arguments.length)throw new v.ValueError("Required argument 'data' not found");this.selection=c.apply(null,arguments)}Object.defineProperty(this,"size",{get:function(){return this.selection.size}.bind(this)}),Object.defineProperty(this,"shape",{get:function(){return this.selection.shape}.bind(this)}),Object.defineProperty(this,"ndim",{get:function(){return this.selection.shape.length}.bind(this)}),Object.defineProperty(this,"dtype",{get:function(){return this.selection.dtype}.bind(this),set:function(r){var i=y.getType(r);i!==y.getType(this.dtype)&&(this.selection=c(new i(this.selection.data),this.selection.shape,this.selection.stride,this.selection.offset))}.bind(this)}),Object.defineProperty(this,"T",{get:function(){return this.transpose()}.bind(this)})};X.prototype.get=function(){for(var r=arguments.length,i=0;i<r;i++)arguments[i]<0&&(arguments[i]+=this.shape[i]);return this.selection.get.apply(this.selection,arguments)},X.prototype.set=function(){return this.selection.set.apply(this.selection,arguments)},X.prototype.slice=function(){for(var r=this.ndim,i=new Array(r),n=new Array(r),t=new Array(r),a=this.shape,s=0;s<r;s++){var u=arguments[s];if("undefined"==typeof u)break;if(null!==u)if(y.isNumber(u))n[s]=u<0?u+a[s]:u,i[s]=null,t[s]=1;else{var c=u[0]<0?u[0]+a[s]:u[0],e=u[1]<0?u[1]+a[s]:u[1];n[s]=e?c:0,i[s]=e?e-c:c,t[s]=u[2]||1}}var f=this.selection.lo.apply(this.selection,n),g=f.hi.apply(f,i),h=g.step.apply(g,t);return new X(h)},X.prototype.pick=function(r){return new X(this.selection.pick.apply(this.selection,arguments))},X.prototype.lo=function(){return new X(this.selection.lo.apply(this.selection,arguments))},X.prototype.hi=function(){return new X(this.selection.hi.apply(this.selection,arguments))},X.prototype.step=function(){return new X(this.selection.step.apply(this.selection,arguments))},X.prototype.flatten=function(){if(1===this.ndim)return new X(this.selection);var r=y.getType(this.dtype),i=y.flatten(this.tolist(),!0);return i instanceof r||(i=new r(i)),new X(i,[this.size])},X.prototype.reshape=function(r){if(0===arguments.length)throw new v.ValueError("function takes at least one argument (0 given)");if(1===arguments.length&&y.isNumber(r)&&(r=[r]),arguments.length>1&&(r=[].slice.call(arguments)),this.size!==y.shapeSize(r))throw new v.ValueError("total size of new array must be unchanged");var i,n,t,a,s=this.selection.shape,u=this.selection.offset,c=this.selection.stride,e=s.length,f=r.length;if(e===f){var g=!0;for(t=0;t<f;++t)if(s[t]!==r[t]){g=!1;break}if(g)return new X(this.selection.data,s,c,u)}else if(1===e){for(i=new Array(f),t=f-1,a=1;t>=0;--t)i[t]=a,a*=r[t];for(n=u,t=0;t<f;++t)i[t]<0&&(n-=(r[t]-1)*i[t]);return new X(this.selection.data,r,i,n)}var h=Math.min(e,f),o=!0;for(t=0;t<h;t++)if(s[t]!==r[t]){o=!1;break}if(o){for(i=new Array(f),t=0;t<f;t++)i[t]=c[t]||1;return n=u,new X(this.selection.data,r,i,n)}return this.flatten().reshape(r)},X.prototype.transpose=function(r){if(0===arguments.length){var i=this.ndim;r=new Array(i);for(var n=0;n<i;n++)r[n]=i-n-1}else arguments.length>1&&(r=arguments);return new X(this.selection.transpose.apply(this.selection,r))},X.prototype.dot=function(r){r=r instanceof X?r:t(r,this.dtype);var i=this.shape,n=r.shape;if(2===i.length&&2===n.length&&i[1]===n[0]){var a=y.getType(this.dtype),s=new X(new a(i[0]*n[1]),[i[0],n[1]]);return f(s.selection,this.selection,r.selection),s}if(1===i.length&&2===n.length&&i[0]===n[0])return this.reshape([i[0],1]).T.dot(r).reshape(n[1]);if(2===i.length&&1===n.length&&i[1]===n[0])return this.dot(r.reshape([n[0],1])).reshape(i[0]);if(1===i.length&&1===n.length&&i[0]===n[0])return this.reshape([i[0],1]).T.dot(r.reshape([n[0],1])).reshape([1]);throw new v.ValueError("cannot compute the matrix product of given arrays")},X.prototype.assign=function(r,i){1===arguments.length&&(i=!0);var n=i?this.clone():this;return y.isNumber(r)?(e.assigns(n.selection,r),n):(r=t(r,this.dtype),e.assign(n.selection,r.selection),n)},X.prototype.add=function(r,i){1===arguments.length&&(i=!0);var n=i?this.clone():this;return y.isNumber(r)?(e.addseq(n.selection,r),n):(r=t(r,this.dtype),e.addeq(n.selection,r.selection),n)},X.prototype.subtract=function(r,i){1===arguments.length&&(i=!0);var n=i?this.clone():this;return y.isNumber(r)?(e.subseq(n.selection,r),n):(r=t(r,this.dtype),e.subeq(n.selection,r.selection),n)},X.prototype.multiply=function(r,i){1===arguments.length&&(i=!0);var n=i?this.clone():this;return y.isNumber(r)?(e.mulseq(n.selection,r),n):(r=t(r,this.dtype),e.muleq(n.selection,r.selection),n)},X.prototype.divide=function(r,i){1===arguments.length&&(i=!0);var n=i?this.clone():this;return y.isNumber(r)?(e.divseq(n.selection,r),n):(r=t(r,this.dtype),e.diveq(n.selection,r.selection),n)},X.prototype.pow=function(r,i){1===arguments.length&&(i=!0);var n=i?this.clone():this;return y.isNumber(r)?(e.powseq(n.selection,r),n):(r=t(r,this.dtype),e.poweq(n.selection,r.selection),n)},X.prototype.exp=function(r){0===arguments.length&&(r=!0);var i=r?this.clone():this;return e.expeq(i.selection),i},X.prototype.sqrt=function(r){0===arguments.length&&(r=!0);var i=r?this.clone():this;return e.sqrteq(i.selection),i},X.prototype.max=function(){return 0===this.selection.size?null:e.sup(this.selection)},X.prototype.min=function(){return 0===this.selection.size?null:e.inf(this.selection)},X.prototype.sum=function(){return e.sum(this.selection)},X.prototype.std=function(){var r=this.clone();e.powseq(r.selection,2);var i=this.mean(),n=Math.abs(e.sum(r.selection)/y.shapeSize(this.shape)-i*i);return n>0?Math.sqrt(n):0},X.prototype.mean=function(){return e.sum(this.selection)/y.shapeSize(this.shape)},X.prototype.tolist=function(){return s(this.selection)},X.prototype.valueOf=function(){return this.tolist()},X.prototype.toString=function(){function r(n,t){if(y.isString(t))return t;if(y.isNumber(t)){var a=u(t);return new Array(Math.max(0,i-a.length+2)).join(" ")+a}n=n||0;var s,c=o.printThreshold,e=c/2|0;return s=t.length>c?[].concat(t.slice(0,e),[" ..."],t.slice(t.length-e)):t,new Array(n+1).join(" ")+"["+s.map(function(i,t){return r(0===t&&0===n?1:n+1,i)}).join(",")+"]"}var i=u(this.max()).length,n=/\]\,(\s*)\[/g,t="],\n$1      [",a=/\]\,(\s+)...\,(\s+)\[/g,s="],\n$2       ...\n$2      [",c=/\[\s+\[/g,e="[[",f=JSON.stringify(this.tolist(),r).replace(n,t).replace(c,e).replace(c,e).replace(a,s).slice(2,-1);switch(this.dtype){case"array":return"array(["+f+")";default:return"array(["+f+", dtype="+this.dtype+")"}},X.prototype.inspect=X.prototype.toString,X.prototype.toJSON=function(){return JSON.stringify(this.tolist())},X.prototype.clone=function(){var r=this.selection;return new X("undefined"==typeof r.data.slice?c([].slice.apply(r.data),r.shape,r.stride,r.offset):c(r.data.slice(),r.shape,r.stride,r.offset))},X.prototype.equal=function(r){if(r=t(r),this.size!==r.size||this.ndim!==r.ndim)return!1;for(var i=this.ndim,n=0;n<i;n++)if(this.shape[n]!==r.shape[n])return!1;return e.all(e.eqeq(this.selection,r.selection))},X.prototype.round=function(r){0===arguments.length&&(r=!0);var i=r?this.clone():this;return e.roundeq(i.selection),i},X.prototype.negative=function(){var r=this.clone();return e.neg(r.selection,this.selection),r},X.prototype.iteraxis=function(r,i){var n=this.shape;if(r===-1&&(r=n.length-1),r<0||r>n.length-1)throw new v.ValueError("invalid axis");for(var a=0;a<n[r];a++){for(var u=new Array(r+1),c=0;c<r+1;c++)u[c]=c===r?a:null;var e=this.selection.pick.apply(this.selection,u),f=t(s(e),this.dtype);i(f,a)}};var b=r("cwise/lib/wrapper")({args:["array","array","array","array"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_55_c=_inline_55_arg2_,_inline_55_f=_inline_55_arg3_,_inline_55_i=_inline_55_arg0_,_inline_55_o=_inline_55_arg1_,_inline_55_t=_inline_55_i*(_inline_55_c+_inline_55_f);_inline_55_arg0_=_inline_55_t-_inline_55_f*(_inline_55_i+_inline_55_o),_inline_55_arg1_=_inline_55_t+_inline_55_c*(_inline_55_o-_inline_55_i)}",args:[{name:"_inline_55_arg0_",lvalue:!0,rvalue:!0,count:2},{name:"_inline_55_arg1_",lvalue:!0,rvalue:!0,count:2},{name:"_inline_55_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_55_arg3_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_55_c","_inline_55_f","_inline_55_i","_inline_55_o","_inline_55_t"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64}),d=r("cwise/lib/wrapper")({args:["array","array","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar",{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1}],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_58_arg0_=_inline_58_arg11_*_inline_58_arg10_+_inline_58_arg12_*_inline_58_arg9_+_inline_58_arg13_*_inline_58_arg8_+_inline_58_arg14_*_inline_58_arg7_+_inline_58_arg1_*_inline_58_arg6_+_inline_58_arg15_*_inline_58_arg5_+_inline_58_arg16_*_inline_58_arg4_+_inline_58_arg17_*_inline_58_arg3_+_inline_58_arg18_*_inline_58_arg2_}",
args:[{name:"_inline_58_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_58_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg6_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg7_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg8_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg9_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg10_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg11_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg12_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg13_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg14_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg15_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg16_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg17_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg18_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64}),j=r("cwise/lib/wrapper")({args:["index","array","array","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar",{offset:[-2,-2],array:1},{offset:[-2,-1],array:1},{offset:[-2,0],array:1},{offset:[-2,1],array:1},{offset:[-2,2],array:1},{offset:[-1,-2],array:1},{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[-1,2],array:1},{offset:[0,-2],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[0,2],array:1},{offset:[1,-2],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1},{offset:[1,2],array:1},{offset:[2,-2],array:1},{offset:[2,-1],array:1},{offset:[2,0],array:1},{offset:[2,1],array:1},{offset:[2,2],array:1}],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_61_arg1_=_inline_61_arg0_[0]<2||_inline_61_arg0_[1]<2?0:_inline_61_arg28_*_inline_61_arg27_+_inline_61_arg29_*_inline_61_arg26_+_inline_61_arg30_*_inline_61_arg25_+_inline_61_arg31_*_inline_61_arg24_+_inline_61_arg32_*_inline_61_arg23_+_inline_61_arg33_*_inline_61_arg22_+_inline_61_arg34_*_inline_61_arg21_+_inline_61_arg35_*_inline_61_arg20_+_inline_61_arg36_*_inline_61_arg19_+_inline_61_arg37_*_inline_61_arg18_+_inline_61_arg38_*_inline_61_arg17_+_inline_61_arg39_*_inline_61_arg16_+_inline_61_arg2_*_inline_61_arg15_+_inline_61_arg40_*_inline_61_arg14_+_inline_61_arg41_*_inline_61_arg13_+_inline_61_arg42_*_inline_61_arg12_+_inline_61_arg43_*_inline_61_arg11_+_inline_61_arg44_*_inline_61_arg10_+_inline_61_arg45_*_inline_61_arg9_+_inline_61_arg46_*_inline_61_arg8_+_inline_61_arg47_*_inline_61_arg7_+_inline_61_arg48_*_inline_61_arg6_+_inline_61_arg49_*_inline_61_arg5_+_inline_61_arg50_*_inline_61_arg4_+_inline_61_arg51_*_inline_61_arg3_}",args:[{name:"_inline_61_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_61_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_61_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg6_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg7_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg8_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg9_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg10_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg11_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg12_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg13_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg14_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg15_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg16_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg17_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg18_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg19_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg20_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg21_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg22_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg23_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg24_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg25_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg26_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg27_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg28_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg29_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg30_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg31_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg32_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg33_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg34_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg35_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg36_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg37_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg38_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg39_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg40_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg41_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg42_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg43_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg44_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg45_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg46_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg47_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg48_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg49_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg50_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg51_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});X.prototype.convolve=function(r){r=X.new(r);var i=this.ndim;if(i!==r.ndim)throw new v.ValueError("arrays must have the same dimensions");for(var n=new Array(i),t=new Array(i),a=this.selection,s=this.shape,u=r.selection,c=r.shape,e=0;e<i;e++){var f=s[e]-c[e]+1;if(f<0)throw new v.ValueError("filter cannot be greater than the array");n[e]=f,t[e]=-1}if(2===i&&3===c[0]&&3===c[1]){var g=new X(new Float32Array(y.shapeSize(s)),s);return d(g.selection,a,u.get(0,0),u.get(0,1),u.get(0,2),u.get(1,0),u.get(1,1),u.get(1,2),u.get(2,0),u.get(2,1),u.get(2,2)),g.lo(1,1).hi(n[0],n[1])}if(3===i&&1===c[2]&&1===s[2]&&3===c[0]&&3===c[1]){var h=new X(new Float32Array(y.shapeSize(s)),s);return d(h.selection.pick(null,null,0),a.pick(null,null,0),u.get(0,0,0),u.get(0,1,0),u.get(0,2,0),u.get(1,0,0),u.get(1,1,0),u.get(1,2,0),u.get(2,0,0),u.get(2,1,0),u.get(2,2,0)),h.lo(1,1).hi(n[0],n[1])}if(2===i&&5===c[0]&&5===c[1]){var o=new X(new Float32Array(y.shapeSize(s)),s);return j(o.selection,a,u.get(0,0),u.get(0,1),u.get(0,2),u.get(0,3),u.get(0,4),u.get(1,0),u.get(1,1),u.get(1,2),u.get(1,3),u.get(1,4),u.get(2,0),u.get(2,1),u.get(2,2),u.get(2,3),u.get(2,4),u.get(3,0),u.get(3,1),u.get(3,2),u.get(3,3),u.get(3,4),u.get(4,0),u.get(4,1),u.get(4,2),u.get(4,3),u.get(4,4)),o.lo(2,2).hi(n[0],n[1])}if(3===i&&1===c[2]&&1===s[2]&&5===c[0]&&5===c[1]){var b=new X(new Float32Array(y.shapeSize(s)),s);return j(b.selection,a,u.get(0,0,0),u.get(0,1,0),u.get(0,2,0),u.get(0,3,0),u.get(0,4,0),u.get(1,0,0),u.get(1,1,0),u.get(1,2,0),u.get(1,3,0),u.get(1,4,0),u.get(2,0,0),u.get(2,1,0),u.get(2,2,0),u.get(2,3,0),u.get(2,4,0),u.get(3,0,0),u.get(3,1,0),u.get(3,2,0),u.get(3,3,0),u.get(3,4,0),u.get(4,0,0),u.get(4,1,0),u.get(4,2,0),u.get(4,3,0),u.get(4,4,0)),b.lo(2,2).hi(n[0],n[1])}return this.fftconvolve(r)},X.prototype.fftconvolve=function(r){if(r=X.new(r),this.ndim!==r.ndim)throw new v.ValueError("arrays must have the same dimensions");var i,n=this.selection,t=r.selection,a=this.ndim,s=1,u=new Array(a),f=new Array(a),o=new Array(a);for(i=a-1;i>=0;--i)f[i]=n.shape[i],u[i]=s,s*=f[i],o[i]=n.shape[i]-t.shape[i]+1;var d=y.getType(n.dtype),j=new X(new d(y.shapeSize(o)),o),k=j.selection,l=h.mallocDouble(s),m=c(l,f,u,0);e.assigns(m,0),e.assign(m.hi.apply(m,n.shape),n);var p=h.mallocDouble(s),q=c(p,f,u,0);e.assigns(q,0),g(1,m,q);var w=h.mallocDouble(s),x=c(w,f,u,0);e.assigns(x,0),e.assign(x.hi.apply(x,t.shape),t);var z=h.mallocDouble(s),A=c(z,f,u,0);e.assigns(A,0),g(1,x,A),b(m,q,x,A),g(-1,m,q);var B=new Array(a),C=new Array(a),D=!1;for(i=0;i<a;++i)k.shape[i]>f[i]&&(D=!0),C[i]=t.shape[i]-1,B[i]=Math.min(k.shape[i],f[i]-C[i]);var E;return D&&e.assign(k,0),E=m.lo.apply(m,C),E=E.hi.apply(E,B),e.assign(k.hi.apply(k,B),E),h.freeDouble(l),h.freeDouble(p),h.freeDouble(w),h.freeDouble(z),j},X.new=t,i.exports=X;var k=r("cwise/lib/wrapper")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_64_a,_inline_64_e=_inline_64_arg1_;for(_inline_64_a=0;_inline_64_a<_inline_64_arg2_.length-1;++_inline_64_a)_inline_64_e=_inline_64_e[_inline_64_arg2_[_inline_64_a]];_inline_64_e[_inline_64_arg2_[_inline_64_arg2_.length-1]]=_inline_64_arg0_}",args:[{name:"_inline_64_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_64_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_64_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_64_a","_inline_64_e"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"unpackCwise",blockSize:64})},{"./config":23,"./errors":25,"./utils":43,"cwise/lib/wrapper":8,ndarray:18,"ndarray-fft":13,"ndarray-gemm":15,"ndarray-ops":17,"typedarray-pool":21}],43:[function(r,i,n){"use strict";function t(r){return"number"==typeof r}function a(r){return"string"==typeof r}function s(r){return"function"==typeof r}function u(r,i,n){n=n||[];for(var a=-1,s=r.length;++a<s;){var c=r[a];t(c)?n[n.length]=c:i?u(c,i,n):n.push(c)}return n}function c(r){for(var i=1,n=0;n<r.length;n++)i*=r[n];return i}function e(r){return s(r)?r:h[r]||Array}function f(r){for(var i=[];"object"==typeof r;)i.push(r.length),r=r[0];return i}function g(r){var i,n;return"object"==typeof r?(i=r[0],"object"==typeof i?(n=i[0],"object"==typeof n?f(r):[r.length,i.length]):[r.length]):[]}var h=r("./dtypes");i.exports={isNumber:t,isString:a,isFunction:s,flatten:u,shapeSize:c,getType:e,getShape:g}},{"./dtypes":24}]},{},[41])(41)});